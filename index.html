<!doctype html>
<html lang="th" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏ï‡πâ‡∏°‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (Admin Centralized)</title>
  <link rel="manifest" href="./manifest.json">
  <link rel="stylesheet" href="css/style.css">

  <meta name="theme-color" content="#4f46e5">
  <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/3135/3135715.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  
  <!-- Google Fonts: Noto Sans Thai -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script type="module" src="js/app.js"></script>
 </head>
 <body class="h-full bg-gray-50">

  <!-- ==================== LOGIN SCREEN ==================== -->
  <div id="login-screen" class="fixed inset-0 z-[100] bg-gray-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-2xl shadow-2xl w-full max-w-4xl overflow-hidden flex flex-col md:flex-row h-auto min-h-[650px] md:min-h-0 md:h-[500px]">
      
      <!-- Left Side: Hero -->
      <div class="md:w-1/2 login-gradient p-10 flex flex-col justify-center items-center text-white text-center relative overflow-hidden">
        <div class="absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none">
           <svg viewBox="0 0 100 100" preserveAspectRatio="none" class="w-full h-full"><path d="M0 100 C 20 0 50 0 100 100 Z" fill="white" /></svg>
        </div>
        <h1 class="text-4xl font-bold mb-4">Student Points</h1>
        <p class="text-lg opacity-90 mb-8">‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏ï‡πâ‡∏°‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</p>
        <div class="w-24 h-24 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm mb-4 text-4xl">
          üëπ
        </div>
      </div>

      <!-- Right Side: Forms -->
      <div class="md:w-1/2 p-8 relative flex flex-col">
        <!-- Tabs -->
        <div class="flex border-b border-gray-200 mb-8">
          <button onclick="switchLoginTab('student')" id="btn-login-student" class="flex-1 py-3 font-medium text-red-600 border-b-2 border-red-600 transition-colors">‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>
          <button onclick="switchLoginTab('teacher')" id="btn-login-teacher" class="flex-1 py-3 font-medium text-gray-400 border-b-2 border-transparent hover:text-gray-600 transition-colors">‡∏Ñ‡∏£‡∏π</button>
        </div>

        <!-- Student Login Form -->
        <div id="form-login-student" class="flex-1 flex flex-col justify-center space-y-6">
            <div class="text-center mb-2">
              <h2 class="text-2xl font-bold text-gray-800">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h2>
              <p class="text-gray-500 text-sm">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ üîê</p>
            </div>
            <div class="space-y-3">
              <div>
                  <label class="block text-gray-700 font-bold mb-1 text-sm">üë§ ‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß</label>
                  <input type="text" id="login-student-id" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß..." class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 outline-none transition-all text-center text-lg font-bold text-gray-700 bg-gray-50">
              </div>
              <div>
                  <label class="block text-gray-700 font-bold mb-1 text-sm">üîë ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                  <input type="password" id="login-student-pass" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô..." class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 outline-none transition-all text-center text-lg font-bold text-gray-700 bg-gray-50">
                  <p class="text-xs text-gray-400 text-center mt-1">* ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß (‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö‡πÉ‡∏´‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Ñ‡∏£‡∏π)</p>
              </div>
            </div>
            <button id="btn-submit-student" onclick="handleStudentLogin()" class="w-full bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-bold py-3 rounded-lg shadow-lg transform active:scale-95 transition-all opacity-50 cursor-not-allowed mt-2" disabled>
              ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
            </button>
          </div>

        <!-- Teacher Login Form -->
        <div id="form-login-teacher" class="hidden flex-1 flex flex-col justify-center space-y-6">
            <div class="text-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏π</h2>
                <p class="text-gray-500 text-sm">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏ö‡∏±‡∏ç‡∏ä‡∏µ Google</p>
              </div>
              
              <button onclick="handleTeacherLogin()" class="w-full flex items-center justify-center gap-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-bold py-3 rounded-lg shadow-sm transition-all transform active:scale-95">
                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" class="w-6 h-6" alt="Google">
                <span>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Google</span>
              </button>
        </div>
        
        <div id="login-status" class="absolute bottom-2 left-0 w-full text-center text-xs text-gray-400">
            ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠...
        </div>
      </div>
    </div>
  </div>

  <!-- ==================== MAIN APP ==================== -->
  <div id="app" class="hidden h-full w-full flex flex-col overflow-hidden">
   <!-- Toast Container -->
   <div id="toast-container" class="fixed bottom-4 right-4 z-[200] flex flex-col items-end gap-2 pointer-events-none"></div>
   
   <!-- Header -->
   <header class="bg-white shadow-md z-10 shrink-0">
    <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
     <div class="flex items-center gap-3">
        <div class="bg-red-100 p-2 rounded-lg text-red-600">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>
        </div>
        <div>
            <h1 id="system-title" class="text-xl font-bold text-gray-800">StdPoint V6.24.1</h1>
            <p id="user-role-display" class="text-xs text-gray-500">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡πÅ‡∏Ç‡∏Å</p>
        </div>
     </div>
     <button onclick="handleLogout()" class="text-red-500 hover:bg-red-50 px-3 py-2 rounded-lg transition-colors text-sm font-medium flex items-center gap-2">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>
        ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
     </button>
    </div>
   </header>
   
   <!-- Tab Navigation -->
   <div class="bg-white border-b border-gray-200 shadow-sm shrink-0">
    <div class="max-w-7xl mx-auto px-4 overflow-x-auto no-scrollbar">
     <nav class="flex space-x-8 min-w-max" id="nav-tabs">
        <!-- Tabs will be injected here based on role -->
     </nav>
    </div>
   </div>

   <!-- Main Content Area -->
   <main class="flex-1 overflow-auto bg-gray-50 p-4">
    <div class="max-w-7xl mx-auto pb-20">
        
        <!-- ============ STUDENT DASHBOARD (View Only) ============ -->
        <div id="content-student-dashboard" class="tab-content hidden space-y-6">
            <div id="announcement-banner" class="hidden bg-gradient-to-r from-pink-500 via-rose-500 to-red-500 text-white p-5 rounded-2xl shadow-lg mb-6 relative overflow-hidden animate-fade-in-down border border-pink-400">
                <div class="absolute -right-4 -top-4 opacity-20 rotate-12">
                    <svg class="w-24 h-24" fill="currentColor" viewBox="0 0 24 24"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>
                </div>
                
                <div class="relative z-10">
                    <div class="flex items-center gap-2 mb-2">
                        <span class="bg-white/20 backdrop-blur-md px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1 border border-white/30 shadow-sm">
                            üì¢ ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏à‡∏≤‡∏Å‡∏Ñ‡∏£‡∏π
                        </span>
                        <span id="announcement-date" class="text-xs text-pink-100 font-medium bg-black/10 px-2 py-1 rounded-md">
                            </span>
                    </div>
                    <p id="announcement-text" class="text-lg md:text-xl font-bold leading-relaxed drop-shadow-md whitespace-pre-wrap break-words">
                        </p>
                </div>
            </div>
            <div class="bg-gradient-to-r from-indigo-600 to-blue-600 text-white px-5 py-2 rounded-xl shadow-md flex items-center gap-3 border border-indigo-400">
                <div class="text-right">
                    <p class="text-[10px] font-medium opacity-80 uppercase tracking-wider">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</p>
                    <p class="text-2xl font-bold leading-none">
                        <span id="student-interest-display"></span><span class="text-sm font-normal">%</span> <span class="text-sm font-normal"> ‡∏ï‡πà‡∏≠‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</span>
                    </p>
                </div>
                <div class="text-3xl opacity-50">üìà</div>
            </div>

            <div id="student-streak-widget" class="bg-white rounded-xl shadow-sm border border-orange-100 p-4 mb-6 relative overflow-hidden"> 
                <div class="absolute top-0 right-0 w-24 h-24 bg-orange-50 rounded-full -mr-10 -mt-10 blur-xl"></div>
    
    <div class="flex justify-between items-center relative z-10">
        <div>
            <h3 class="font-bold text-gray-800 flex items-center gap-2">
                üìÖ ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô (Daily Login)
            </h3>
            <p class="text-sm text-gray-500 mt-1">
                ‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á: <span id="streak-count-display" class="font-bold text-orange-600 text-lg">0</span> ‡∏ß‡∏±‡∏ô 
                <span class="text-xs text-gray-400">(‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î: <span id="streak-max-display">0</span>)</span>
            </p>
        </div>
        <div class="text-right">
            <button id="btn-claim-streak" onclick="claimDailyStreak()" class="bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-2 rounded-xl font-bold shadow-lg shadow-orange-200 transition-all transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none">
                üéÅ ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πâ‡∏°
            </button>
            <div id="streak-timer" class="text-xs text-gray-400 mt-1 hidden">‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏°‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏∞</div>
        </div>
    </div>
    
    <div class="mt-4 pt-4 border-t border-orange-50">
        <div class="h-2 w-full bg-gray-100 rounded-full overflow-hidden">
            <div id="streak-progress-bar" class="h-full bg-orange-500 transition-all duration-500" style="width: 0%"></div>
        </div>
        <p id="next-reward-hint" class="text-xs text-orange-500 mt-2 text-center font-bold">...</p>
    </div>
    </div>
            <!-- Profile Card -->
            <div id="interest-announce-banner" class="hidden bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white p-4 rounded-xl shadow-lg relative overflow-hidden animate-pulse">
                <div class="flex items-center gap-3 relative z-10">
                    <span class="text-3xl">üì¢</span>
                    <div>
                        <h3 class="font-bold text-lg">‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®: ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏à‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á!</h3>
                        <p id="interest-announce-text" class="text-sm text-indigo-100"></p>
                    </div>
                </div>
                <div class="absolute -right-4 -bottom-4 text-white/10 text-9xl font-bold">%</div>
            </div>

            
            <div class="bg-white rounded-2xl shadow-sm p-6 flex flex-col md:flex-row items-center gap-6 border border-gray-100">
                <div class="w-24 h-24 bg-red-100 rounded-full flex items-center justify-center text-4xl shadow-inner">
                    üéì
                </div>
                <div class="flex-1 text-center md:text-left">
                    <h2 id="std-dash-name" class="text-2xl font-bold text-gray-800">Loading...</h2>
                    <p id="std-dash-class" class="text-gray-500">Class Loading...</p>
                    <div class="mt-4 flex flex-wrap justify-center md:justify-start gap-4">
                        <div class="bg-blue-50 px-6 py-3 rounded-xl border border-blue-100">
                            <span class="block text-xs text-blue-600 uppercase font-bold tracking-wider">‡πÅ‡∏ï‡πâ‡∏°‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠</span>
                            <span id="std-dash-points" class="text-3xl font-bold text-blue-700">0</span>
                        </div>
                         <!-- Bank & Interest Display -->
                         <div class="bg-green-50 px-6 py-3 rounded-xl border border-green-100 flex flex-col justify-between relative overflow-hidden group">
                            <div>
                                <span class="block text-xs text-green-600 uppercase font-bold tracking-wider mb-1">üè¶ ‡πÅ‡∏ï‡πâ‡∏°‡πÉ‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</span>
                                <div class="flex items-baseline gap-2">
                                   <span id="std-dash-bank" class="text-3xl font-bold text-green-700">0</span>
                                   <span class="text-xs text-green-500 font-medium">(‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏™‡∏∞‡∏™‡∏° <span id="std-dash-interest">0</span>)</span>
                                </div>
                                <div class="flex gap-8 mt-4 relative z-10 pt-2 border-t border-white/10">
                                    <button onclick="openStudentBankModal('deposit')" class="flex-1 bg-white/20 hover:bg-white/30 text-green-500 py-1.5 rounded-lg font-bold text-sm transition-all border border-white/10 flex items-center justify-start gap-1 active:scale-95">
                                        üì• ‡∏ù‡∏≤‡∏Å‡πÅ‡∏ï‡πâ‡∏°
                                    </button>
                                    <button onclick="openStudentBankModal('withdraw')" class="w-20 bg-white/20 hover:bg-white/30 text-green-500 py-1.5 rounded-lg font-bold text-sm transition-all border border-white/10 flex items-center justify-end gap-1 active:scale-95">
                                        üì§ ‡∏ñ‡∏≠‡∏ô‡πÅ‡∏ï‡πâ‡∏°
                                    </button>
                                </div>
                            </div>
                            
                            
                        
                            <div class="absolute -right-4 -bottom-4 text-green-200/50 text-6xl select-none pointer-events-none">‡∏ø</div>
                        </div>
                        
                    </div>
                </div>
            </div>
            
            <div id="std-warning-section" class="mt-6 hidden animate-bounce-in">
                <div class="bg-yellow-50 rounded-2xl border-2 border-yellow-200 p-5 relative overflow-hidden shadow-sm">
                    <div class="absolute -right-6 -top-6 text-yellow-100 text-9xl select-none pointer-events-none">‚ö†Ô∏è</div>
                    
                    <div class="relative z-10 flex flex-col md:flex-row gap-6 items-start">
                        <div class="flex items-center gap-4 min-w-[200px]">
                            <div class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center text-3xl border-2 border-yellow-200 shadow-inner">
                                üëÆ
                            </div>
                            <div>
                                <h3 class="font-bold text-gray-800 text-lg">‡∏ï‡∏¥‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÉ‡∏ö‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô!</h3>
                                <p class="text-sm text-yellow-800">
                                    ‡πÇ‡∏î‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß <span id="std-dash-warning-count" class="font-bold text-red-600 text-xl">0</span> ‡πÉ‡∏ö
                                </p>
                                <div id="std-dash-pending-box" class="hidden mt-1 inline-block bg-red-100 text-red-700 text-xs px-2 py-0.5 rounded border border-red-200 font-bold">
                                    üîí ‡∏ñ‡∏π‡∏Å‡∏≠‡∏≤‡∏¢‡∏±‡∏î: <span id="std-dash-pending-points">0</span> ‡πÅ‡∏ï‡πâ‡∏°
                                </div>
                            </div>
                        </div>

                        <div class="flex-1 w-full bg-white/60 rounded-xl p-4 border border-yellow-100 backdrop-blur-sm">
                            <h4 class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2 flex items-center gap-1">
                                üìú ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏•‡∏ö‡∏•‡πâ‡∏≤‡∏á‡πÇ‡∏ó‡∏©
                            </h4>
                            <div id="std-dash-missions" class="space-y-2">
                                </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent History -->
            <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
                <h3 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                    <span>üïí</span> ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
                </h3>
                <div id="std-history-list" class="space-y-3 text-sm">
                    <!-- History items -->
                </div>
            </div>
        </div>
        <div id="content-student-guild" class="tab-content hidden h-full flex flex-col space-y-6">
        </div>

        

        <!-- ============ HOME TAB (Teacher List) ============ -->
      
        <div id="content-home" class="tab-content hidden h-full flex flex-col">
            <div class="mb-6 flex gap-3 flex-wrap shrink-0">
                <button onclick="showAddStudentModal()" class="bg-red-600 hover:bg-red-700 text-white px-5 py-2.5 rounded-lg font-medium shadow-sm transition-colors flex items-center gap-2">
                    <span class="text-xl leading-none font-bold">+</span> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
                </button>
                <button onclick="showImportCSVModal()" class="bg-green-600 hover:bg-green-700 text-white px-5 py-2.5 rounded-lg font-medium shadow-sm transition-colors flex items-center gap-2">
                     üìã ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ CSV
                </button>
                <button onclick="showQuizModal()" class="bg-purple-600 hover:bg-purple-700 text-white px-5 py-2.5 rounded-lg font-medium shadow-sm transition-colors flex items-center gap-2">
                    <span>üìù</span> ‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö & ‡πÅ‡∏à‡∏Å‡πÅ‡∏ï‡πâ‡∏°
                </button>
            </div>
            <div class="bg-gradient-to-r from-indigo-600 to-blue-600 text-white px-5 py-2 rounded-xl shadow-md flex items-center gap-3 border border-indigo-400">
                <div class="text-right">
                    <p class="text-[10px] font-medium opacity-80 uppercase tracking-wider">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</p>
                    <p class="text-2xl font-bold leading-none">
                        <span id="home-interest-display"></span><span class="text-sm font-normal">%</span> <span class="text-sm font-normal"> ‡∏ï‡πà‡∏≠‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</span>
                    </p>
                </div>
                <div class="text-3xl opacity-50">üìà</div>
            </div>
      
            
            <div id="bulk-actions" class="hidden fixed top-0 left-0 w-full bg-slate-900/95 backdrop-blur-sm text-white p-3 z-40 shadow-2xl flex flex-col md:flex-row items-center justify-between gap-4 transition-all duration-300 animate-slide-in-top border-b border-slate-700">
    
    <div class="flex items-center gap-4 shrink-0">
        <button onclick="cancelBulkSelection()" class="bg-slate-700 hover:bg-slate-600 text-slate-300 w-8 h-8 rounded-full flex items-center justify-center transition-colors" title="‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å">
         X   
        </button>
        <div class="flex items-center gap-3">
            <div class="bg-red-600 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg shadow-md animate-bounce-short">
                <span id="selected-count">0</span>
            </div>
            <div class="leading-tight">
                <span class="font-bold text-lg block">‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</span>
                <span class="text-xs text-slate-400 font-mono" id="selected-names-preview">...</span>
            </div>
        </div>
    </div>

    <div class="flex flex-wrap justify-center gap-2 overflow-x-auto pb-1 md:pb-0 hide-scrollbar">
        
        <div class="flex gap-1 p-1 bg-slate-800 rounded-lg border border-slate-700">
            <button onclick="showBulkQuestModal()" class="btn-action bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-2 rounded-md font-bold shadow-sm flex items-center gap-2" title="‡∏ó‡∏≥‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à">
                ‚ö° <span class="hidden lg:inline">‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à</span>
            </button>
            <button onclick="showBulkPointsModal('add', false)" class="btn-action bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded-md font-bold shadow-sm flex items-center gap-2" title="‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏ï‡πâ‡∏°">
                ‚ûï <span class="hidden lg:inline">‡πÅ‡∏ï‡πâ‡∏°</span>
            </button>
            <button onclick="showBulkPointsModal('remove', false)" class="btn-action bg-orange-600 hover:bg-orange-700 text-white px-3 py-2 rounded-md font-bold shadow-sm flex items-center gap-2" title="‡∏•‡∏î‡πÅ‡∏ï‡πâ‡∏°">
                ‚ûñ <span class="hidden lg:inline">‡πÅ‡∏ï‡πâ‡∏°</span>
            </button>
            <div class="flex gap-1 p-1 bg-slate-800 rounded-lg border border-slate-700 ml-2">
                <button onclick="showBulkWarningModal('add')" class="btn-action bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-2 rounded-md font-bold shadow-sm flex items-center gap-2" title="‡πÅ‡∏à‡∏Å‡πÉ‡∏ö‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô">
                    ‚ö†Ô∏è <span class="hidden lg:inline">‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</span>
                </button>
                <button onclick="showBulkWarningModal('remove')" class="btn-action bg-gray-500 hover:bg-gray-600 text-white px-3 py-2 rounded-md font-bold shadow-sm flex items-center gap-2" title="‡∏•‡∏î‡πÉ‡∏ö‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô">
                    üõ°Ô∏è <span class="hidden lg:inline">-‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</span>
                </button>
            </div>
            
        </div>

        <div class="flex gap-1 p-1 bg-slate-800 rounded-lg border border-slate-700" id="single-action-group">
            <button onclick="handleStickySingleAction('shop')" class="btn-single bg-amber-500 hover:bg-amber-600 text-white px-3 py-2 rounded-md font-bold shadow-sm flex items-center gap-2 transition-all">
                üí∞ <span class="hidden lg:inline">‡πÅ‡∏•‡∏Å</span>
            </button>
            <button onclick="showBulkGiveRewardModal()" class="btn-action bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded-md font-bold shadow-sm flex items-center gap-2" title="‡πÅ‡∏à‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç/‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏™‡∏∏‡πà‡∏°">
                üéÅ <span class="hidden lg:inline">‡πÅ‡∏à‡∏Å</span>
            </button>
            <button onclick="handleStickySingleAction('inventory')" class="btn-single bg-indigo-500 hover:bg-indigo-600 text-white px-3 py-2 rounded-md font-bold shadow-sm flex items-center gap-2 transition-all">
                üéí <span class="hidden lg:inline">‡πÑ‡∏≠‡πÄ‡∏ó‡∏°</span>
            </button>
            <button onclick="handleStickySingleAction('edit')" class="btn-single bg-gray-200 hover:bg-gray-300 text-gray-800 px-3 py-2 rounded-md font-bold shadow-sm flex items-center gap-2 transition-all">
                ‚úèÔ∏è <span class="hidden lg:inline">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</span>
            </button>
            
        </div>

        <button onclick="confirmBulkDelete()" class="bg-gray-700 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-bold shadow-sm transition-colors flex items-center gap-2 ml-2">
            üóëÔ∏è
        </button>
    </div>
</div>
<div class="mb-4 relative shrink-0">
                <input type="text" id="search-input" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠, ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà, ‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô..." class="w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl shadow-sm focus:ring-2 focus:ring-red-500 focus:border-transparent" oninput="filterStudents()">
                <svg class="w-5 h-5 text-gray-400 absolute left-3 top-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
            </div>

            <div class="bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200 flex-1 flex flex-col">
                <div class="overflow-x-auto flex-1">
                    <table class="w-full text-sm min-w-[1000px]">
                        <thead class="bg-gray-50 text-gray-700 border-b border-gray-200 text-xs uppercase">
                            <tr>
                                <th class="px-4 py-4 text-center w-10">
                                    <input type="checkbox" id="select-all" onchange="toggleSelectAll()" class="w-4 h-4 rounded border-gray-300 text-red-600 focus:ring-red-500">
                                </th>
                                <th class="px-2 py-4 text-left font-bold cursor-pointer hover:text-red-600" onclick="sortStudents('student_id')">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà ‚Üï</th>
                                <th class="px-2 py-4 text-left font-bold cursor-pointer hover:text-red-600" onclick="sortStudents('full_name')">‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏• (‡∏ö‡∏±‡∏ü) ‚Üï</th>
                                <th class="px-2 py-4 text-center font-bold cursor-pointer hover:text-red-600" onclick="sortStudents('points')">‡πÅ‡∏ï‡πâ‡∏°‡∏ï‡∏±‡∏ß ‚Üï</th>
                                
                                <th class="px-2 py-4 text-center font-bold text-indigo-700 cursor-pointer" onclick="sortStudents('bank_points')">‡∏ù‡∏≤‡∏Å ‚Üï</th>
                                <th class="px-2 py-4 text-center font-bold text-green-600">‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢</th>
                                <th class="px-2 py-4 text-center font-bold text-emerald-700">‡∏£‡∏ß‡∏°‡∏ñ‡∏≠‡∏ô‡πÑ‡∏î‡πâ</th>
                                <th class="px-2 py-4 text-center font-bold text-yellow-600">‡πÉ‡∏ö‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô ‚ö†Ô∏è</th>
                                
                               
                                <th class="px-2 py-4 text-center font-bold">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                            </tr>
                        </thead>

                        <tbody id="student-list" class="divide-y divide-gray-100">
                            </tbody>
                    </table>
                </div>
                <div id="pagination-home" class="p-4 border-t bg-gray-50 flex justify-between items-center">
                    </div>
            </div>
        </div>

        <div id="content-punishment" class="tab-content hidden h-full flex flex-col">
            <div class="mb-4 shrink-0">
                <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                    ‚ö†Ô∏è ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏∏‡∏°‡∏õ‡∏£‡∏∞‡∏û‡∏§‡∏ï‡∏¥
                    <span id="punishment-count" class="bg-yellow-100 text-yellow-700 text-xs px-2 py-1 rounded-full">0</span>
                </h2>
                <p class="text-sm text-gray-500">‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ù‡∏≤‡∏Å‡∏ñ‡∏≠‡∏ô‡πÅ‡∏ï‡πâ‡∏°‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏à‡∏∞‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡πÅ‡∏ï‡πâ‡∏°‡πÉ‡∏´‡∏°‡πà‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏≠‡∏≤‡∏¢‡∏±‡∏î‡πÑ‡∏ß‡πâ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏´‡∏°‡∏î‡πÇ‡∏ó‡∏©</p>
            </div>
            
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden flex-1">
                <div id="punishment-list" class="divide-y divide-gray-100 overflow-y-auto h-full p-4 space-y-3">
                    </div>
            </div>
        </div>
                
        <div id="content-quests" class="tab-content hidden h-full flex flex-col">
            <div class="mb-6 shrink-0">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                        üìú ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à (Quests)
                    </h2>
                    <div class="flex gap-2">
                        <button onclick="openManageQuestCategoriesModal()" class="bg-white border border-indigo-200 text-indigo-600 hover:bg-indigo-50 px-4 py-2.5 rounded-lg font-bold shadow-sm transition-colors text-sm flex items-center gap-2">
                            üìÇ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
                        </button>
                        <button onclick="showAddQuestModal()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-lg font-bold shadow-lg transition-transform active:scale-95 flex items-center gap-2">
                            <span class="text-xl leading-none">+</span> ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à
                        </button>
                    </div>
                </div>

                <div class="flex gap-2 overflow-x-auto pb-2 no-scrollbar" id="quest-category-filters">
                </div>
                
                <div class="mt-3 relative">
                    <input type="text" id="quest-search-input" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à..." class="w-full pl-10 pr-4 py-2.5 border border-indigo-100 rounded-xl shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white" oninput="renderQuests()">
                    <svg class="w-5 h-5 text-gray-400 absolute left-3 top-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200 flex-1 flex flex-col">
                <div class="overflow-x-auto flex-1">
                    <table class="w-full text-sm min-w-[600px]">
                        <thead class="bg-indigo-50 text-indigo-800 border-b border-indigo-100">
                            <tr>
                                <th class="px-6 py-4 text-center w-16">‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô</th>
                                <th class="px-6 py-4 text-left">‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à</th>
                                <th class="px-6 py-4 text-center">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</th>
                                <th class="px-6 py-4 text-center">‡πÅ‡∏ï‡πâ‡∏°‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</th>
                                <th class="px-6 py-4 text-center w-32">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                            </tr>
                        </thead>
                        <tbody id="quests-list-table" class="divide-y divide-gray-100">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- GROUP TAB -->
        <div id="content-groups" class="tab-content hidden h-full flex flex-col space-y-6">
            <div class="flex justify-between items-center shrink-0">
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 flex items-center gap-2">
                        üë• ‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Å‡∏¥‡∏à (Custom Groups)
                    </h2>
                    <p class="text-sm text-gray-500">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ï‡πà‡∏≤‡∏á‡πÜ (‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏Å‡∏•‡∏∏‡πà‡∏°)</p>
                </div>
                <button onclick="openManageGroupModal()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-lg font-bold shadow-lg flex items-center gap-2">
                    <span>+</span> ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏°‡πà
                </button>
            </div>

            <div id="custom-groups-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 overflow-y-auto pb-20 p-1">
                </div>
        </div>

        <!-- ============ BANK TAB ============ -->
        <div id="content-bank" class="tab-content hidden h-full flex flex-col">
            <div class="bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl shadow-lg p-6 text-white mb-6 shrink-0">
                <div class="flex justify-between items-center">
                    <div>
                        <h2 class="text-2xl font-bold mb-1">üè¶ ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡πÅ‡∏ï‡πâ‡∏°</h2>
                        <p class="text-emerald-100">‡∏ù‡∏≤‡∏Å‡πÅ‡∏ï‡πâ‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ (‡∏Ñ‡∏£‡∏π‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)</p>
                    </div>
                    <div class="text-right bg-white/10 p-3 rounded-lg backdrop-blur-sm">
                        <p class="text-xs text-emerald-100">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢</p>
                        <p id="interest-rate-display" class="text-3xl font-bold">1.00%</p>
                        <p class="text-xs text-emerald-100">‡∏ï‡πà‡∏≠‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</p>
                    </div>
                </div>
            </div>
            
            <div class="mb-4 relative shrink-0">
                <input type="text" id="bank-search-input" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà, ‡∏ä‡∏∑‡πà‡∏≠, ‡∏ä‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô..." class="w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl shadow-sm focus:ring-2 focus:ring-emerald-500 focus:border-transparent" oninput="renderBankList()">
                <svg class="w-5 h-5 text-gray-400 absolute left-3 top-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
            </div>

            <div class="bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200 flex-1 flex flex-col">
                <div class="overflow-x-auto flex-1">
                    <table class="w-full text-sm min-w-[800px]">
                        <thead class="bg-emerald-50 text-emerald-800 border-b border-emerald-100">
                            <tr>
                                <th class="px-4 py-5 text-left cursor-pointer hover:bg-emerald-100" onclick="sortBank('student_id')">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà ‚Üï</th>
                                <th class="px-4 py-5 text-left cursor-pointer hover:bg-emerald-100" onclick="sortBank('full_name')">‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‚Üï</th>
                                <th class="px-4 py-5 text-left cursor-pointer hover:bg-emerald-100" onclick="sortBank('class_name')">‡∏ä‡∏±‡πâ‡∏ô ‚Üï</th>
                                <th class="px-4 py-5 text-center cursor-pointer hover:bg-emerald-100" onclick="sortBank('points')">‡πÅ‡∏ï‡πâ‡∏°‡πÉ‡∏ô‡∏°‡∏∑‡∏≠ ‚Üï</th>
                                <th class="px-4 py-5 text-center cursor-pointer hover:bg-emerald-100" onclick="sortBank('bank_points')">‡πÅ‡∏ï‡πâ‡∏°‡∏ù‡∏≤‡∏Å ‚Üï</th>
                                <th class="px-4 py-5 text-center">‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏™‡∏∞‡∏™‡∏°</th>
                                <th class="px-4 py-5 text-center">‡∏£‡∏ß‡∏°‡∏ñ‡∏≠‡∏ô‡πÑ‡∏î‡πâ</th>
                                <th class="px-4 py-5 text-center">‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°</th>
                            </tr>
                        </thead>
                        <tbody id="bank-student-list" class="divide-y divide-gray-100">
                            <!-- JS Generated -->
                        </tbody>
                    </table>
                </div>
                 <!-- Pagination Control -->
                <div id="pagination-bank" class="p-4 border-t bg-gray-50 flex justify-between items-center"></div>
            </div>
        </div>

        

        <!-- ============ REWARDS TAB (UPDATED) ============ -->
        <div id="content-rewards" class="tab-content hidden h-full flex flex-col">
            <!-- Teacher Controls -->
            <div id="teacher-reward-controls" class="flex gap-2">
                <button onclick="showAddRewardModal()" class="bg-amber-500 hover:bg-amber-600 text-white px-5 py-2.5 rounded-lg font-medium shadow-sm transition-colors flex items-center gap-2">
                    <span class="text-xl leading-none">+</span> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
                </button>
                <button onclick="openManageRewardCategoriesModal()" class="bg-white border border-gray-300 text-gray-600 px-4 py-2.5 rounded-lg font-bold shadow-sm hover:bg-gray-50 flex items-center gap-2 ml-2">
                    üìÇ ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
                </button>
            </div>
            
            <!-- Teacher View (Table) -->
            <div id="rewards-table-container" class="hidden bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200 flex-1 flex flex-col">
                <div class="overflow-x-auto flex-1">
                    <table class="w-full text-sm min-w-[600px]">
                        <thead class="bg-amber-50 text-amber-800 border-b border-amber-100">
                            <tr>
                                <th class="px-4 py-5 text-center w-24">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</th>
                                <th class="px-4 py-5 text-left">‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</th>
                                <th class="px-4 py-5 text-center">‡πÉ‡∏ä‡πâ‡πÅ‡∏ï‡πâ‡∏°</th>
                                <th class="px-4 py-5 text-center">‡∏™‡∏ï‡πá‡∏≠‡∏Å</th>
                                <th class="px-4 py-5 text-center">‡πÇ‡∏Ñ‡∏ß‡∏ï‡∏≤/‡∏Ñ‡∏ô</th>
                                <th class="px-4 py-5 text-center">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                            </tr>
                        </thead>
                        <tbody id="rewards-list" class="divide-y divide-gray-100">
                            <!-- JS Generated Rewards (List View) -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Student View (Grid) -->
            <div id="rewards-grid-container" class="hidden flex-1 overflow-y-auto p-2">
                 <div id="rewards-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 pb-10">
                    <!-- JS Generated Rewards (Grid View) -->
                 </div>
            </div>
        </div>


<div id="content-report" class="tab-content hidden h-full flex flex-col space-y-6">
            <div class="flex justify-between items-center shrink-0">
                <h2 class="text-xl font-bold text-gray-800">üìä ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏¢‡∏´‡πâ‡∏≠‡∏á</h2>
                <button onclick="exportClassReportCSV()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium shadow-sm flex items-center gap-2">
                    <span>üì•</span> Export CSV
                </button>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 shrink-0">
                <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-200">
                    <h3 class="font-bold text-gray-700 mb-4 text-center">‡πÅ‡∏ï‡πâ‡∏°‡∏£‡∏ß‡∏°‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡πâ‡∏≠‡∏á</h3>
                    <canvas id="chart-points"></canvas>
                </div>
                <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-200">
                    <h3 class="font-bold text-gray-700 mb-4 text-center">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏ö‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡πâ‡∏≠‡∏á</h3>
                    <canvas id="chart-redcards"></canvas>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200 flex-1 flex flex-col">
                <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead class="bg-gray-50 text-gray-700 border-b border-gray-200">
                            <tr>
                                <th class="px-6 py-4 text-left">‡∏ä‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</th>
                                <th class="px-6 py-4 text-center">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</th>
                                <th class="px-6 py-4 text-center">‡πÅ‡∏ï‡πâ‡∏°‡∏£‡∏ß‡∏°</th>
                                <th class="px-6 py-4 text-center">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</th>
                                <th class="px-6 py-4 text-center text-yellow-600">‡πÉ‡∏ö‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏£‡∏ß‡∏°</th>
                            </tr>
                        </thead>
                        <tbody id="report-class-list" class="divide-y divide-gray-100">
                            </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- ============ HISTORY TAB ============ -->
        <div id="content-history" class="tab-content hidden h-full flex flex-col">
            <div class="flex justify-between items-center mb-6 shrink-0">
                <h2 class="text-xl font-bold text-gray-800">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</h2>
                <div id="teacher-history-controls" class="hidden">
                    <button onclick="confirmDeleteAllHistory()" class="text-red-600 hover:bg-red-50 px-3 py-1.5 rounded-md text-sm font-medium transition-colors">‡∏•‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                </div>
            </div>
            
            <div class="mb-4 relative shrink-0">
                <input type="text" id="history-search-input" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥..." class="w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl shadow-sm focus:ring-2 focus:ring-gray-500 focus:border-transparent" oninput="renderHistory()">
                <svg class="w-5 h-5 text-gray-400 absolute left-3 top-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
            </div>
            
            <div class="bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200 flex-1 flex flex-col min-h-[500px] md:min-h-0">
                <div class="overflow-y-auto max-h-[1000px]">
                    <table class="w-full text-sm min-w-[600px] md:min-w-full">
                        <thead class="bg-gray-50 text-gray-700 border-b border-gray-200 sticky top-0 z-10 shadow-sm">
                            <tr>
                                <th class="px-4 py-5 text-left">‡πÄ‡∏ß‡∏•‡∏≤</th>
                                <th class="px-4 py-5 text-left">‡∏ä‡∏∑‡πà‡∏≠</th>
                                <th class="px-4 py-5 text-left">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</th>
                                <th class="px-4 py-5 text-center">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                                <th class="px-4 py-5 text-center">‡∏•‡∏ö</th>
                            </tr>
                        </thead>
                        <tbody id="history-list" class="divide-y divide-gray-100">
                            <!-- JS Generated -->
                        </tbody>
                    </table>
                </div>
                 <!-- Pagination Control -->
                <div id="pagination-history" class="p-4 border-t bg-gray-50 flex justify-between items-center"></div>
            </div>
        </div>

       
        

        <!-- ============ SETTINGS TAB (Teacher Only) ============ -->
        <div id="content-settings" class="tab-content hidden h-full overflow-y-auto">
            <div class="bg-white rounded-xl shadow-sm p-6 max-w-2xl mx-auto border border-gray-200">
                <h2 class="text-xl font-bold text-gray-800 mb-6">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö</h2>
                
                <div class="space-y-6">
                    <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-200 mt-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                            üì¢ ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£ (News & Announcement)
                        </h3>
                        <div class="bg-pink-50 p-4 rounded-xl border border-pink-100 mb-4">
                            <label class="block text-sm font-bold text-pink-800 mb-2">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</label>
                            
                            <div class="flex flex-col md:flex-row gap-3">
                                <textarea id="setting-announcement-input" 
                                       rows="3"
                                       class="flex-1 w-full px-4 py-3 border border-pink-200 rounded-xl focus:ring-2 focus:ring-pink-500 outline-none bg-white resize-y" 
                                       placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà... (‡πÄ‡∏ß‡πâ‡∏ô‡∏ß‡πà‡∏≤‡∏á = ‡∏õ‡∏¥‡∏î‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®)&#10;‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ"></textarea>
                                
                                <button onclick="saveAnnouncement()" 
                                        class="bg-pink-600 hover:bg-pink-700 text-white px-6 py-3 rounded-xl font-bold shadow-md shadow-pink-200 transition-all flex items-center justify-center gap-2 md:w-auto w-full h-fit self-center md:self-start">
                                    <span>üöÄ ‡∏™‡πà‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</span>
                                </button>
                            </div>
                            <p class="text-xs text-pink-600 mt-2 ml-1">
                                * ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® ‡πÉ‡∏´‡πâ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡∏™‡πà‡∏á
                            </p>
                        </div>
                    </div>

                    <div>
                        <label class="block text-gray-700 font-medium mb-2">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£ (% ‡∏ï‡πà‡∏≠‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á)</label>
                        <div class="flex gap-4 items-center">
                            <input type="number" id="new-interest-rate" step="0.01" class="flex-1 px-4 py-2 border border-gray-300 rounded-lg" 
                                   placeholder="1.00" onkeydown="if(event.key==='Enter') handleInterestRateChange()">
                            <span class="text-gray-500 text-sm">(‡∏Å‡∏î Enter ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å)</span>
                        </div>
                        <p class="text-xs text-gray-500 mt-2">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô ‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏™‡∏∞‡∏™‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏•‡∏∞‡∏ó‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡πÅ‡∏ï‡πâ‡∏°‡∏ù‡∏≤‡∏Å‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</p>
                    </div>
                    
                    
                    <div class="pt-6 border-t border-gray-100 mt-6">

                        <div id="buff-rules-settings" class="bg-white p-6 rounded-2xl shadow-sm border border-blue-100 mt-6 mb-6">
                            <h2 class="text-xl font-bold text-blue-900 mb-6 flex items-center gap-2">
                                <span>üõ°Ô∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡∏ö‡∏±‡∏ü‡∏Å‡∏¥‡∏•‡∏î‡πå</span>
                            </h2>
    
                            <div id="buff-rules-container" class="space-y-6"></div>
    
                            <div class="mt-6 pt-6 border-t border-gray-100">
                                <label class="block text-sm font-bold text-gray-700 mb-2 flex items-center gap-2">
                                    üòá ‡∏Å‡∏é‡πÄ‡∏î‡πá‡∏Å‡∏î‡∏µ (Good Guild) - ‡∏â‡∏ö‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô
                                </label>
                                
                                <div class="bg-orange-50 p-4 rounded-xl border border-orange-200">
                                    <div class="flex items-start gap-3">
                                        <div class="text-2xl mt-1">‚ö†Ô∏è</div>
                                        <div class="flex-1">
                                            <span class="text-sm font-bold text-orange-800 block mb-1">
                                                ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç: ‡∏Å‡∏¥‡∏•‡∏î‡πå‡∏ï‡πâ‡∏≠‡∏á "‡πÑ‡∏£‡πâ‡πÉ‡∏ö‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô (‡πÉ‡∏ö‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á)" 100%
                                            </span>
                                            <p class="text-xs text-orange-700 mb-3 leading-relaxed">
                                                ‡∏´‡∏≤‡∏Å‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏ô‡∏Å‡∏¥‡∏•‡∏î‡πå‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô <b>‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ö‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏¢</b> ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏±‡∏ô‡∏ó‡∏µ<br>
                                                (‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡πÉ‡∏Ñ‡∏£‡πÇ‡∏î‡∏ô‡πÉ‡∏ö‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏°‡πâ‡πÅ‡∏ï‡πà‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡∏ö‡∏±‡∏ü‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡∏ó‡∏±‡πâ‡∏á‡∏Å‡∏¥‡∏•‡∏î‡πå!)
                                            </p>
                                            
                                            <div class="flex items-center gap-3 bg-white p-2 rounded-lg border border-orange-100 w-fit">
                                                <span class="text-sm font-bold text-gray-600">‡∏£‡∏±‡∏ö‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°:</span>
                                                <input type="number" id="rule-good-discount" class="border border-orange-300 rounded-md w-20 px-2 py-1 text-center font-bold text-orange-600 outline-none focus:ring-2 focus:ring-orange-200" placeholder="0"> 
                                                <span class="font-bold text-orange-600">%</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
    
                            <button onclick="saveBuffRulesConfig()" class="mt-8 w-full bg-blue-600 text-white py-3 rounded-xl font-bold shadow-lg hover:bg-blue-700 transition-all">
                                üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                            </button>
                        </div>

                        <h3 class="font-bold text-gray-800 mb-2">‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏ö‡∏ö (Backup)</h3>
                        <p class="text-xs text-gray-500 mb-4">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô, ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥, ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•) ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå .json ‡πÉ‡∏ô‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢</p>
                        
                        <button onclick="exportSystemData()" class="w-full bg-indigo-50 hover:bg-indigo-100 text-indigo-700 border border-indigo-200 py-4 rounded-xl font-bold flex items-center justify-center gap-2 transition-all shadow-sm">
                            <span class="text-xl">üíæ</span> ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Backup)
                        </button>
                    </div>

                    <div class="mt-4 pt-4 border-t border-gray-100">
                        <h4 class="font-bold text-gray-800 mb-2 text-sm">‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Restore)</h4>
                        <p class="text-xs text-red-500 mb-3">‚ö†Ô∏è ‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô: ‡∏Å‡∏≤‡∏£‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡∏à‡∏∞ "‡∏ó‡∏±‡∏ö" ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö ‡∏ñ‡πâ‡∏≤ ID ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô</p>
                        
                        <input type="file" id="restore-file-input" accept=".json" class="hidden" onchange="handleRestoreFile(this)">
                        
                        <button onclick="document.getElementById('restore-file-input').click()" class="w-full bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all shadow-sm text-sm">
                            <span class="text-lg">üìÇ</span> ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                        </button>
                    </div>

                    

    <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200 mt-6">
    <h3 class="text-lg font-bold text-gray-800 mb-4">üõ°Ô∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏¥‡∏•‡∏î‡πå</h3>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏¥‡∏•‡∏î‡πå (‡∏Ñ‡∏ô)</label>
            <input type="number" id="config-max-guild-members" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500" placeholder="‡πÄ‡∏ä‡πà‡∏ô 10 (‡πÉ‡∏™‡πà 0 ‡∏Ñ‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î)">
            <p class="text-xs text-gray-500 mt-1">‡πÉ‡∏™‡πà 0 ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</p>
        </div>
        
    </div>
    <div class="mt-4 flex justify-end">
        <button onclick="saveGuildConfig()" class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-bold">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏¥‡∏•‡∏î‡πå</button>
    </div>
</div>

<div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-200 mt-6">
    <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
        ‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠ (Streak Config)
    </h3>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="bg-gray-50 p-4 rounded-xl border border-gray-200">
            <label class="block text-sm font-bold text-gray-700 mb-2">üí∞ ‡πÅ‡∏ï‡πâ‡∏°‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô (‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô)</label>
            <input type="number" id="conf-streak-base" class="w-full border rounded-lg px-3 py-2 text-center font-bold text-green-600" value="10">
        </div>

        <div class="bg-orange-50 p-4 rounded-xl border border-orange-200 md:col-span-2">
            <label class="block text-sm font-bold text-orange-800 mb-3">üèÜ ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á (Streak Bonus)</label>
            <div class="space-y-2">
                <div class="grid grid-cols-12 gap-2 items-center text-sm">
                        <div class="col-span-1 font-bold text-gray-500 text-center">#1</div>
                        <div class="col-span-4 flex items-center gap-2">‡∏Ñ‡∏£‡∏ö <input type="number" id="conf-streak-d1" class="w-16 border rounded px-1 text-center" value="7"> ‡∏ß‡∏±‡∏ô</div>
                        <div class="col-span-7 flex items-center gap-2">‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏° <input type="number" id="conf-streak-p1" class="w-16 border rounded px-1 text-center font-bold text-indigo-600" value="100"> ‡πÅ‡∏ï‡πâ‡∏°</div>
                </div>
                <div class="grid grid-cols-12 gap-2 items-center text-sm">
                        <div class="col-span-1 font-bold text-gray-500 text-center">#2</div>
                        <div class="col-span-4 flex items-center gap-2">‡∏Ñ‡∏£‡∏ö <input type="number" id="conf-streak-d2" class="w-16 border rounded px-1 text-center" value="14"> ‡∏ß‡∏±‡∏ô</div>
                        <div class="col-span-7 flex items-center gap-2">‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏° <input type="number" id="conf-streak-p2" class="w-16 border rounded px-1 text-center font-bold text-indigo-600" value="300"> ‡πÅ‡∏ï‡πâ‡∏°</div>
                </div>
                <div class="grid grid-cols-12 gap-2 items-center text-sm">
                        <div class="col-span-1 font-bold text-gray-500 text-center">#3</div>
                        <div class="col-span-4 flex items-center gap-2">‡∏Ñ‡∏£‡∏ö <input type="number" id="conf-streak-d3" class="w-16 border rounded px-1 text-center" value="21"> ‡∏ß‡∏±‡∏ô</div>
                        <div class="col-span-7 flex items-center gap-2">‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏° <input type="number" id="conf-streak-p3" class="w-16 border rounded px-1 text-center font-bold text-indigo-600" value="500"> ‡πÅ‡∏ï‡πâ‡∏°</div>
                </div>
                <div class="grid grid-cols-12 gap-2 items-center text-sm">
                        <div class="col-span-1 font-bold text-gray-500 text-center">#4</div>
                        <div class="col-span-4 flex items-center gap-2">‡∏Ñ‡∏£‡∏ö <input type="number" id="conf-streak-d4" class="w-16 border rounded px-1 text-center" value="30"> ‡∏ß‡∏±‡∏ô</div>
                        <div class="col-span-7 flex items-center gap-2">‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏° <input type="number" id="conf-streak-p4" class="w-16 border rounded px-1 text-center font-bold text-indigo-600" value="1000"> ‡πÅ‡∏ï‡πâ‡∏°</div>
                </div>
                <div class="grid grid-cols-12 gap-2 items-center text-sm">
                        <div class="col-span-1 font-bold text-gray-500 text-center">#5</div>
                        <div class="col-span-4 flex items-center gap-2">‡∏Ñ‡∏£‡∏ö <input type="number" id="conf-streak-d5" class="w-16 border rounded px-1 text-center" value="45"> ‡∏ß‡∏±‡∏ô</div>
                        <div class="col-span-7 flex items-center gap-2">‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏° <input type="number" id="conf-streak-p5" class="w-16 border rounded px-1 text-center font-bold text-indigo-600" value="3000"> ‡πÅ‡∏ï‡πâ‡∏°</div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="mt-4 flex justify-end">
        <button onclick="saveStreakConfig()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-xl font-bold shadow-md transition-all">
            üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
        </button>
    </div>
</div>


                </div> 
            </div>
        </div>
<!-- GUILD TAB-->
<div id="content-guilds" class="tab-content hidden h-full flex flex-col space-y-6">
    <div class="flex justify-between items-center shrink-0">
        <div>
            <h2 class="text-2xl font-bold text-gray-800 flex items-center gap-2">
                üè∞ ‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏¥‡∏•‡∏î‡πå (Guild War)
            </h2>
            <p class="text-sm text-gray-500">‡∏£‡∏ß‡∏°‡∏û‡∏•‡∏±‡∏á‡∏™‡∏≤‡∏°‡∏±‡∏Ñ‡∏Ñ‡∏µ ‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏ï‡πâ‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏µ‡∏°!</p>
        </div>
        <div class="flex gap-2">
            <button onclick="calculateAndApplyAutoBuffs()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-bold shadow-md text-sm">
                üîÑ ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏ö‡∏±‡∏ü
            </button>
            <button onclick="showCreateGuildModal()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-lg font-bold shadow-lg transition-transform active:scale-95 flex items-center gap-2">
                <span>üõ°Ô∏è</span> ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏¥‡∏•‡∏î‡πå‡πÉ‡∏´‡∏°‡πà
            </button>
        </div>
    </div>

    <div id="guild-leaderboard" class="grid grid-cols-1 md:grid-cols-3 gap-6 shrink-0">
    </div>

    <div class="mb-2 relative shrink-0">
        <input type="text" id="guild-search-input" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏¥‡∏•‡∏î‡πå ‡∏´‡∏£‡∏∑‡∏≠ ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏ô‡∏Å‡∏¥‡∏•‡∏î‡πå..." class="w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent" oninput="renderGuildsDashboard()">
        <svg class="w-5 h-5 text-gray-400 absolute left-3 top-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
    </div>

    <div class="bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200 flex-1 flex flex-col">
        <div class="p-4 border-b border-gray-100 bg-gray-50 flex justify-between items-center">
            <h3 class="font-bold text-gray-700">‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏¥‡∏•‡∏î‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
            <span class="text-xs text-gray-400">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏Å‡∏¥‡∏•‡∏î‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</span>
        </div>
        <div class="overflow-x-auto flex-1">
            <table class="w-full text-sm min-w-[600px]">
                <thead class="bg-white text-gray-600 border-b">
                    <tr>
                        <th class="px-6 py-4 text-center w-16">‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</th>
                        <th class="px-6 py-4 text-left">‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏¥‡∏•‡∏î‡πå</th>
                        <th class="px-6 py-4 text-center">‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</th>
                        <th class="px-6 py-4 text-center">‡πÅ‡∏ï‡πâ‡∏°‡∏£‡∏ß‡∏°</th>
                        <th class="px-6 py-4 text-center">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                    </tr>
                </thead>
                <tbody id="guild-list-body" class="divide-y divide-gray-100">
                </tbody>
            </table>
        </div>
        <div id="pagination-guilds" class="p-4 border-t bg-gray-50 flex justify-between items-center"></div>
    </div>
</div>

<div id="create-guild-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50 p-4">
    <div class="bg-white rounded-xl shadow-xl max-w-sm w-full p-6">
        <h2 class="text-xl font-bold text-gray-800 mb-4">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏¥‡∏•‡∏î‡πå‡πÉ‡∏´‡∏°‡πà</h2>
        <form onsubmit="handleCreateGuild(event)" class="space-y-4">
            <div>
                <label class="text-xs text-gray-500">‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏¥‡∏•‡∏î‡πå</label>
                <input type="text" id="new-guild-name" required placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏†‡∏≤‡∏Ñ‡∏µ‡∏ü‡∏µ‡∏ô‡∏¥‡∏Å‡∏ã‡πå" class="w-full px-4 py-2 border rounded-lg">
            </div>
            <div>
                <label class="text-xs text-gray-500">‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå (Emoji)</label>
                <input type="text" id="new-guild-icon" placeholder="ü¶Å" class="w-full px-4 py-2 border rounded-lg text-center text-2xl">
            </div>
            <div>
                <label class="text-xs text-gray-500">‡∏Å‡∏é‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö‡∏Å‡∏¥‡∏•‡∏î‡πå</label>
                <textarea id="new-guild-rules" rows="3" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ï‡πâ‡∏≠‡∏á‡∏ä‡πà‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡∏ó‡∏≥‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à..." class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500"></textarea>
            </div>
            
            <div class="flex gap-3 pt-2">
                <button type="button" onclick="document.getElementById('create-guild-modal').classList.add('hidden')" class="flex-1 bg-gray-100 text-gray-600 py-2 rounded-lg">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button type="submit" class="flex-1 bg-indigo-600 text-white py-2 rounded-lg font-bold">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏•‡∏¢</button>
            </div>
            
        </form>
    </div>
</div>

<div id="manage-guild-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50 p-0 sm:p-4">
    <div class="bg-white sm:rounded-2xl shadow-xl max-w-6xl w-full mx-auto flex flex-col h-full md:h-[95vh] overflow-hidden relative">
        
        <div class="shrink-0 bg-white border-b border-gray-200 z-24 shadow-sm relative">
            
            <div class="px-5 py-3 border-b border-gray-100 flex justify-between items-center bg-gray-50/50">
                <div class="flex items-center gap-3 flex-1">
                    <span class="text-xs font-bold text-gray-400 uppercase tracking-wider">Guild Editor</span>
                    <input type="hidden" id="manage-guild-id">
                </div>
                <button onclick="document.getElementById('manage-guild-modal').classList.add('hidden')" class="w-8 h-8 rounded-full bg-white hover:bg-red-50 border border-gray-200 hover:border-red-200 flex items-center justify-center text-gray-400 hover:text-red-500 transition-colors text-xl font-bold">
                    &times;
                </button>
            </div>

            <div class="p-4 grid grid-cols-1 lg:grid-cols-12 gap-4 max-h-[40vh] overflow-y-auto lg:overflow-visible">
                
                <div class="lg:col-span-6 space-y-3">
                    <div class="flex gap-2">
                        <div class="relative group">
                            <input type="text" id="edit-guild-icon" class="w-16 h-full text-center text-3xl border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 bg-gray-50 group-hover:bg-white transition-colors" placeholder="üõ°Ô∏è">
                            <span class="absolute -bottom-2 left-1/2 -translate-x-1/2 text-[9px] bg-gray-800 text-white px-1.5 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô</span>
                        </div>
                        <div class="flex-1">
                            <input type="text" id="edit-guild-name" class="w-full h-full px-4 text-lg font-bold text-gray-800 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 bg-gray-50 focus:bg-white transition-colors" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏¥‡∏•‡∏î‡πå...">
                        </div>
                    </div>
                    
                    <div class="relative">
                        <textarea id="edit-guild-rules" rows="2" class="w-full px-3 py-2 text-sm border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 bg-white resize-none" placeholder="üìú ‡∏£‡∏∞‡∏ö‡∏∏‡∏Å‡∏é‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö‡∏Å‡∏¥‡∏•‡∏î‡πå‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..."></textarea>
                    </div>
                </div>

                <div class="lg:col-span-6 grid grid-cols-2 gap-3">
                    
                    <div class="col-span-1 bg-red-50/50 p-3 rounded-xl border border-red-100">
                        <h4 class="text-xs font-bold text-red-800 mb-2 flex items-center gap-1">
                            üìù ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏Å‡∏¥‡∏•‡∏î‡πå (Contract)
                        </h4>
                        <div class="space-y-2">
                            <div class="flex items-center justify-end gap-2">
                                <span class="text-[10px] text-red-400 w-20">‡∏™‡∏±‡∏ç‡∏ç‡∏≤</span>
                                <input type="number" id="edit-guild-cooldown" class="w-20 h-8 px-1 border border-red-200 rounded text-center text-sm font-bold text-red-600 focus:border-red-500" placeholder="0">
                                <span class="text-[10px] text-red-400 w-6">‡∏ä‡∏°.</span>
                            </div>
                            <div class="flex items-center justify-end gap-2">
                                <span class="text-[10px] text-red-400 w-20">‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö‡∏≠‡∏≠‡∏Å</span>
                                <input type="number" id="edit-guild-fee" class="w-20 h-8 px-1 border border-red-200 rounded text-center text-sm font-bold text-red-600 focus:border-red-500" placeholder="0">
                                <span class="text-[10px] text-red-400 w-6">‡πÅ‡∏ï‡πâ‡∏°</span>
                            </div>
                        </div>
                    </div>

                    <div class="col-span-1 bg-amber-50/50 p-3 rounded-xl border border-amber-100">
                        <h4 class="text-xs font-bold text-amber-800 mb-2 flex items-center gap-1">
                            ‚ú® ‡∏û‡∏•‡∏±‡∏á‡πÅ‡∏ù‡∏á (Guild Buffs)
                        </h4>
                        <div class="space-y-2">
                            <div class="flex items-center justify-end gap-2">
                                <span class="text-[10px] text-amber-500 w-16">‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢</span>
                                <input type="number" id="guild-buff-interest" step="0.01" class="w-20 h-8 px-2 border border-amber-200 rounded text-center text-sm font-bold text-green-600 focus:border-amber-500" placeholder="0.0">
                                <span class="text-[10px] text-amber-500 w-6">%</span>
                            </div>
                            <div class="flex items-center justify-end gap-2">
                                <span class="text-[10px] text-amber-500 w-16">‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏Ç‡∏≠‡∏á</span>
                                <input type="number" id="guild-buff-discount" class="w-20 h-8 px-2 border border-amber-200 rounded text-center text-sm font-bold text-red-500 focus:border-amber-500" placeholder="0">
                                <span class="text-[10px] text-amber-500 w-6">%</span>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <div class="px-5 pb-3">
                <div class="relative">
                    <input type="text" id="search-student-guild" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏¥‡∏•‡∏î‡πå..." class="w-full pl-10 pr-4 py-2.5 bg-gray-100 border-none rounded-xl focus:ring-2 focus:ring-indigo-500 text-sm font-bold" oninput="renderGuildMembersSelect()">
                    <svg class="w-5 h-5 text-gray-400 absolute left-3 top-2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                </div>
                <div class="flex justify-between items-end mt-1 px-1">
                     <p class="text-[10px] text-gray-400">* ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏•‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</p>
                     <p class="text-[10px] text-indigo-500 font-bold cursor-pointer hover:underline" onclick="toggleGuildSelection('all')">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                </div>
            </div>
        </div>

        <div class="flex-1 overflow-y-auto p-5 bg-gray-50/30 custom-scrollbar">
            <div id="guild-member-selection" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-2 pb-4">
                </div>
        </div>
        
        <div class="p-4 bg-white border-t border-gray-100 flex justify-between items-center z-20 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]">
             <button onclick="if(confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏ö‡∏Å‡∏¥‡∏•‡∏î‡πå‡∏ô‡∏µ‡πâ?')) deleteGuild()" class="text-red-400 hover:text-red-600 hover:bg-red-50 px-4 py-2 rounded-lg text-sm font-bold transition-colors flex items-center gap-2">
                üóëÔ∏è ‡∏•‡∏ö‡∏Å‡∏¥‡∏•‡∏î‡πå
             </button>
             <button onclick="saveGuildData()" class="bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white px-10 py-2.5 rounded-xl font-bold shadow-lg shadow-indigo-200 transition-all active:scale-95 flex items-center gap-2">
                <span>üíæ</span> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
             </button>
        </div>
        
    </div>
</div>


    </div>
   </main>

   <!-- ==================== MODALS ==================== -->
   
   <!-- Generic Confirmation Modal -->
   <div id="confirmation-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-[100] p-4">
        <div class="bg-white rounded-2xl shadow-2xl max-w-sm w-full p-6 transform scale-100 transition-all">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl text-red-600">‚ö†Ô∏è</div>
                <h3 class="text-xl font-bold text-gray-900" id="confirm-modal-title">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</h3>
                <p class="text-gray-500 text-sm mt-2" id="confirm-modal-message">‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</p>
            </div>
            <div class="flex gap-3">
                <button onclick="closeConfirmModal()" class="flex-1 py-3 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-colors">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button onclick="executeConfirmAction()" class="flex-1 py-3 text-white bg-red-600 hover:bg-red-700 rounded-xl font-bold shadow-md transition-colors">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
            </div>
        </div>
   </div>
   
   <!-- Bank Action Modal -->
   <div id="bank-action-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50 p-4">
    <div class="bg-white rounded-xl shadow-xl max-w-sm w-full p-6">
        <h3 id="bank-modal-title" class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
            <span>üè¶</span> ‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£
        </h3>
        <input type="hidden" id="bank-student-id">
        
        <div class="bg-gray-50 rounded-xl p-3 mb-4 border border-gray-200">
            <div class="flex justify-between items-center mb-2 border-b border-gray-200 pb-2">
                <span class="text-xs text-gray-500 font-bold">‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ç‡∏≠‡∏á</span>
                <span id="bank-student-name" class="font-bold text-indigo-700 text-lg">-</span>
            </div>
            
            <div class="grid grid-cols-2 gap-3">
                <div class="bg-white p-2 rounded-lg border border-blue-100 text-center shadow-sm">
                    <span class="text-[10px] text-blue-500 uppercase font-bold block mb-1">üíµ ‡πÅ‡∏ï‡πâ‡∏°‡πÉ‡∏ô‡∏°‡∏∑‡∏≠</span>
                    <span id="bank-wallet-display" class="text-xl font-bold text-blue-700 block">0</span>
                </div>
                
                <div class="bg-white p-2 rounded-lg border border-green-100 text-center shadow-sm">
                    <span class="text-[10px] text-green-600 uppercase font-bold block mb-1">üè¶ ‡πÉ‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£ (‡∏£‡∏ß‡∏°)</span>
                    <span id="bank-balance-display" class="text-xl font-bold text-green-700 block">0</span>
                </div>
            </div>
        </div>

        <input type="number" id="bank-amount" class="w-full px-4 py-3 border rounded-lg text-lg font-bold text-center mb-2" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏ï‡πâ‡∏°">
        <input type="text" id="bank-note" class="w-full px-4 py-2 border rounded-lg text-sm mb-4 bg-gray-50" placeholder="üìù ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ä‡πà‡∏ß‡∏¢‡∏à‡∏≥ (Optional)">
        
        <div class="grid grid-cols-2 gap-3 mb-2">
            <button onclick="document.getElementById('bank-transaction-type').value='deposit'; handleBankTransaction()" class="bg-green-50 text-green-700 border border-green-200 hover:bg-green-100 py-2 rounded-lg font-bold text-sm">
                ‡∏ù‡∏≤‡∏Å (‡∏ï‡∏≤‡∏°‡∏¢‡∏≠‡∏î)
            </button>
            <button onclick="document.getElementById('bank-transaction-type').value='withdraw'; handleBankTransaction()" class="bg-amber-50 text-amber-700 border border-amber-200 hover:bg-amber-100 py-2 rounded-lg font-bold text-sm">
                ‡∏ñ‡∏≠‡∏ô (‡∏ï‡∏≤‡∏°‡∏¢‡∏≠‡∏î)
            </button>
        </div>

        <div class="grid grid-cols-2 gap-3 mb-3">
            <button onclick="handleBankAll('deposit')" class="bg-green-600 text-white hover:bg-green-700 py-2 rounded-lg font-bold text-sm shadow-md flex items-center justify-center gap-1">
                üì• ‡∏ù‡∏≤‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            </button>
            <button onclick="handleBankAll('withdraw')" class="bg-amber-500 text-white hover:bg-amber-600 py-2 rounded-lg font-bold text-sm shadow-md flex items-center justify-center gap-1">
                üì§ ‡∏ñ‡∏≠‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            </button>
        </div>
        
        <input type="hidden" id="bank-transaction-type" value="deposit">

        <button onclick="hideBankModal()" class="w-full text-gray-400 text-sm hover:text-gray-600 mt-2">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
    </div>
</div>

   <!-- Teacher Student Redeem Modal (Shop) -->
   <div id="student-redeem-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl shadow-xl max-w-4xl w-full p-6 h-[80vh] flex flex-col">
            <div class="flex justify-between items-center mb-4">
                <div>
                    <h3 class="text-xl font-bold text-gray-900">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</h3>
                    <p id="shop-student-name" class="text-indigo-600 font-bold"></p>
                </div>
                <button onclick="document.getElementById('student-redeem-modal').classList.add('hidden')" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
            </div>
            
            <div id="shop-grid" class="flex-1 overflow-y-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 p-2">
                <!-- Rewards will be listed here -->
            </div>
        </div>
   </div>

   <!-- Edit Student Modal -->
   <div id="edit-student-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50 p-4">
    <div class="bg-white rounded-xl shadow-xl max-w-md w-full p-6">
     <h2 class="text-xl font-bold text-gray-800 mb-4">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h2>
     <form onsubmit="handleEditStudentSubmit(event)" class="space-y-4">
       <input type="hidden" id="edit-std-doc-id">
       <div>
         <label class="text-xs text-gray-500">‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß</label>
         <input type="text" id="edit-std-id" required class="w-full px-4 py-2 border rounded-lg bg-gray-50">
       </div>
       <div>
         <label class="text-xs text-gray-500">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
         <input type="text" id="edit-std-name" required class="w-full px-4 py-2 border rounded-lg">
       </div>
       <div>
         <label class="text-xs text-gray-500">‡∏ä‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</label>
         <input type="text" id="edit-std-class" required class="w-full px-4 py-2 border rounded-lg">
       </div>
       <div>
        <label class="text-xs text-gray-500">üîë ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</label>
        <input type="text" id="edit-std-pass" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏´‡∏±‡∏™‡πÉ‡∏´‡∏°‡πà (‡πÄ‡∏ß‡πâ‡∏ô‡∏ß‡πà‡∏≤‡∏á‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô)" class="w-full px-4 py-2 border rounded-lg bg-yellow-50 focus:bg-white transition-colors">
      </div>
       <div class="flex gap-3 pt-2">
         <button type="button" onclick="document.getElementById('edit-student-modal').classList.add('hidden')" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 rounded-lg">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
         <button type="submit" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
       </div>
     </form>
    </div>
   </div>

   <!-- Add Student Modal -->
   <div id="add-student-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50 p-4">
    <div class="bg-white rounded-xl shadow-xl max-w-md w-full p-6">
     <h2 class="text-xl font-bold text-gray-800 mb-4">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà</h2>
     <form onsubmit="handleAddStudent(event)" class="space-y-4">
       <div>
         <label class="text-xs text-gray-500">‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</label>
         <input type="text" id="add-std-id" required placeholder="‡πÄ‡∏ä‡πà‡∏ô 1001" class="w-full px-4 py-2 border rounded-lg">
       </div>
       <div>
         <label class="text-xs text-gray-500">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
         <input type="text" id="add-std-name" required placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô" class="w-full px-4 py-2 border rounded-lg">
       </div>
       <div>
         <label class="text-xs text-gray-500">‡∏ä‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</label>
         <input type="text" id="add-std-class" required placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏õ.1/1" class="w-full px-4 py-2 border rounded-lg">
       </div>
       <div>
        <label class="text-xs text-gray-500">üîë ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö)</label>
        <input type="text" id="add-std-pass" placeholder="‡πÄ‡∏ß‡πâ‡∏ô‡∏ß‡πà‡∏≤‡∏á = ‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏´‡∏±‡∏™" class="w-full px-4 py-2 border rounded-lg bg-yellow-50 focus:bg-white transition-colors">
      </div>
       <div class="flex gap-3 pt-2">
         <button type="button" onclick="document.getElementById('add-student-modal').classList.add('hidden')" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 rounded-lg">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
         <button type="submit" class="flex-1 bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg shadow-md">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
       </div>
     </form>
    </div>
   </div>
   
   <!-- CSV Import Modal (New) -->
   <div id="import-csv-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50 p-4">
    <div class="bg-white rounded-xl shadow-xl max-w-2xl w-full p-6 flex flex-col h-[80vh]">
     <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-bold text-gray-800">‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• CSV</h2>
        <button onclick="document.getElementById('import-csv-modal').classList.add('hidden')" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
     </div>
     <div class="mb-2 text-sm text-gray-600">
        <p>‡∏Å‡πä‡∏≠‡∏õ‡∏õ‡∏µ‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Excel ‡∏°‡∏≤‡∏ß‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà (‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå: <b>‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß, ‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•, ‡∏ä‡∏±‡πâ‡∏ô, ‡πÅ‡∏ï‡πâ‡∏°, ‡πÉ‡∏ö‡πÅ‡∏î‡∏á</b>)</p>
        <p class="text-xs text-gray-400 mt-1">* ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ Header ‡πÑ‡∏î‡πâ (‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏Ç‡πâ‡∏≤‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÅ‡∏£‡∏Å‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç)</p>
     </div>
     <textarea id="import-csv-text" class="flex-1 w-full p-4 border border-gray-300 rounded-lg font-mono text-sm focus:ring-2 focus:ring-green-500 outline-none resize-none" placeholder="1001    ‡∏î.‡∏ä.‡∏£‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô    ‡∏õ.1/1    50    0..."></textarea>
     <div class="flex gap-3 pt-4">
         <button type="button" onclick="document.getElementById('import-csv-modal').classList.add('hidden')" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-3 rounded-lg font-medium">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
         <button type="button" onclick="handleCSVImport()" class="flex-1 bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg font-bold shadow-md">‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
     </div>
    </div>
   </div>

   <!-- Point Management Modal -->
   <div id="points-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50 p-4 pt-24">
    <div class="bg-white rounded-xl shadow-xl max-w-md w-full p-6">
     <h2 id="points-modal-title" class="text-xl font-bold text-gray-800 mb-4">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡πâ‡∏°</h2>
     <div id="selected-students-preview" class="mb-4 text-sm text-gray-500 max-h-20 overflow-y-auto"></div>
     <form onsubmit="handlePointsSubmit(event)" class="space-y-4">
       <div class="flex flex-col gap-1">
           <label id="points-input-label" class="text-sm text-gray-500">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏ï‡πâ‡∏°</label>
           <input type="number" id="points-amount" required min="1" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô" class="w-full px-4 py-2 border rounded-lg text-lg font-bold">
       </div>
       <textarea id="points-reason" placeholder="‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏• (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)" class="w-full px-4 py-2 border rounded-lg" rows="2"></textarea>
       <div class="flex gap-3 pt-2">
         <button type="button" onclick="hidePointsModal()" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 rounded-lg">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
         <button type="submit" class="flex-1 bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
       </div>
     </form>
    </div>
   </div>
   
    
   

    <!-- Add Reward Modal -->
    <div id="add-reward-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50 p-4">
        <div class="bg-white rounded-xl shadow-xl max-w-2xl w-full p-6 max-h-[90vh] flex flex-col">
            <h2 class="text-xl font-bold text-gray-800 mb-4 shrink-0">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• / ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏™‡∏∏‡πà‡∏°</h2>
            
            

                <form onsubmit="handleAddReward(event)" class="space-y-4 overflow-y-auto pr-2 custom-scrollbar">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="text-xs text-gray-500">‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•/‡∏Å‡∏•‡πà‡∏≠‡∏á</label>
                        <input type="text" id="add-reward-name" required placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏ó‡∏û‡πÄ‡∏à‡πâ‡∏≤" class="w-full px-4 py-2 border rounded-lg">
                    </div>
                    <div>
                        <label class="text-xs text-gray-500">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
                        <select id="add-reward-category" class="w-full px-4 py-2 border rounded-lg bg-white"></select>
                    </div>
                    <div>
                        <label class="text-xs text-gray-500">‡∏£‡∏≤‡∏Ñ‡∏≤ (‡πÅ‡∏ï‡πâ‡∏°)</label>
                        <input type="number" id="add-reward-points" required class="w-full px-4 py-2 border rounded-lg">
                    </div>
                </div>
                <div>
                    <label class="text-xs text-gray-500">URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</label>
                    <input type="text" id="add-reward-img" placeholder="https://..." class="w-full px-4 py-2 border rounded-lg">
                </div>
                
                <div class="bg-gray-50 p-3 rounded-lg border border-gray-200">
                    <label class="text-xs text-gray-500 block mb-1">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</label>
                    <select id="add-reward-type" class="w-full px-4 py-2 border rounded-lg bg-white" onchange="toggleRewardTypeInputs()">
                        <option value="general">üéÅ ‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (‡πÅ‡∏•‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏ö)</option>
                        <option value="gacha_custom">üé≤ ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏™‡∏∏‡πà‡∏° (Custom Gacha) ‚ú®</option>
                    </select>
                </div>

                <div id="gacha-builder-container" class="hidden bg-amber-50 p-4 rounded-lg border border-amber-200">
                    <div class="flex justify-between items-center mb-2">
                        <h3 class="text-sm font-bold text-amber-800">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏™‡∏∏‡πà‡∏°</h3>
                        <span class="text-xs text-amber-600">‡∏£‡∏ß‡∏°‡πÇ‡∏≠‡∏Å‡∏≤‡∏™: <span id="gacha-total-chance" class="font-bold">0</span>%</span>
                    </div>
                    <div id="gacha-slots-list" class="space-y-2 mb-3"></div>
                    <button type="button" onclick="addGachaSlot()" class="w-full py-2 border-2 border-dashed border-amber-300 text-amber-600 rounded-lg hover:bg-amber-100 font-bold text-sm">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ (Slot)</button>
                </div>

                
                    <div class="bg-red-50 p-3 rounded-lg border border-red-100">
                        <label class="text-xs font-bold text-red-800 block mb-2">üö´ ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î (Option)</label>
                        <div class="flex gap-4">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" id="add-reward-no-guild" class="rounded text-red-600 focus:ring-red-500">
                                <span class="text-xs text-gray-700">‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡∏ö‡∏±‡∏ü‡∏Å‡∏¥‡∏•‡∏î‡πå</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" id="add-reward-no-personal" class="rounded text-red-600 focus:ring-red-500">
                                <span class="text-xs text-gray-700">‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡∏ö‡∏±‡∏ü‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</span>
                            </label>
                        </div>
                    </div>
                
                    

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="text-xs text-gray-500">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å</label>
                        <input type="number" id="add-reward-stock" class="w-full px-4 py-2 border rounded-lg">
                        <div class="flex items-center mt-1">
                            <input type="checkbox" id="add-reward-unlimited" class="mr-2" onchange="toggleStockInput('add')">
                            <label for="add-reward-unlimited" class="text-[10px] text-gray-600">‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î</label>
                        </div>
                    </div>
                    <div class="flex items-center gap-2 mt-4 p-3 bg-gray-50 rounded-lg border border-gray-200">
                        <input type="checkbox" id="add-reward-active" checked class="w-5 h-5 text-green-600 rounded focus:ring-green-500 cursor-pointer">
                        <label for="add-reward-active" class="text-sm font-bold text-gray-700 cursor-pointer select-none">‚úÖ ‡πÄ‡∏õ‡∏¥‡∏î‡∏Ç‡∏≤‡∏¢‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</label>
                    </div>
                    <div>
                      <label class="text-xs text-gray-500">‡πÇ‡∏Ñ‡∏ß‡∏ï‡∏≤/‡∏Ñ‡∏ô</label>
                        <input type="number" id="add-reward-quota" class="w-full px-4 py-2 border rounded-lg">
                        <div class="flex items-center mt-1">
                            <input type="checkbox" id="add-reward-quota-unlimited" class="mr-2" onchange="toggleQuotaInput('add')">
                            <label for="add-reward-quota-unlimited" class="text-[10px] text-gray-600">‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î (0)</label>
                    </div>
                </div>
              </div>
                <div class="flex gap-3 pt-4 sticky bottom-0 bg-white border-t mt-4">
                    <button type="button" onclick="document.getElementById('add-reward-modal').classList.add('hidden')" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 rounded-lg">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="submit" class="flex-1 bg-amber-500 hover:bg-amber-600 text-white py-2 rounded-lg shadow-md">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                </div>
            </form>
                
                
        </div>
    </div>
    <div id="edit-reward-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50 p-4">
        <div class="bg-white rounded-xl shadow-xl max-w-2xl w-full p-6 max-h-[90vh] flex flex-col">
            <h2 class="text-xl font-bold text-gray-800 mb-4 shrink-0">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• / ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏™‡∏∏‡πà‡∏°</h2>
            
            <form onsubmit="handleEditRewardSubmit(event)" class="space-y-4 overflow-y-auto pr-2 custom-scrollbar">
                <input type="hidden" id="edit-reward-id">

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="text-xs text-gray-500">‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•/‡∏Å‡∏•‡πà‡∏≠‡∏á</label>
                        <input type="text" id="edit-reward-name" required class="w-full px-4 py-2 border rounded-lg">
                    </div>
                    <div>
                        <label class="text-xs text-gray-500">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
                        <select id="edit-reward-category" class="w-full px-4 py-2 border rounded-lg bg-white"></select>
                    </div>
                    <div>
                        <label class="text-xs text-gray-500">‡∏£‡∏≤‡∏Ñ‡∏≤ (‡πÅ‡∏ï‡πâ‡∏°)</label>
                        <input type="number" id="edit-reward-points" required class="w-full px-4 py-2 border rounded-lg">
                    </div>
                </div>
                <div>
                    <label class="text-xs text-gray-500">URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</label>
                    <input type="text" id="edit-reward-img" placeholder="https://..." class="w-full px-4 py-2 border rounded-lg">
                </div>

                <div class="bg-gray-50 p-3 rounded-lg border border-gray-200">
                    <label class="text-xs text-gray-500 block mb-1">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</label>
                    <select id="edit-reward-type" class="w-full px-4 py-2 border rounded-lg bg-white" onchange="toggleEditRewardTypeInputs()">
                        <option value="general">üéÅ ‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (‡πÅ‡∏•‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏ö)</option>
                        <option value="gacha_custom">üé≤ ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏™‡∏∏‡πà‡∏° (Custom Gacha) ‚ú®</option>
                    </select>
                </div>

                <div id="edit-gacha-builder-container" class="hidden bg-amber-50 p-4 rounded-lg border border-amber-200">
                    <div class="flex justify-between items-center mb-2">
                        <h3 class="text-sm font-bold text-amber-800">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏™‡∏∏‡πà‡∏°</h3>
                        <span class="text-xs text-amber-600">‡∏£‡∏ß‡∏°‡πÇ‡∏≠‡∏Å‡∏≤‡∏™: <span id="edit-gacha-total-chance" class="font-bold">0</span>%</span>
                    </div>
                    
                    <div id="edit-gacha-slots-list" class="space-y-2 mb-3"></div>

                    <button type="button" onclick="addEditGachaSlot()" class="w-full py-2 border-2 border-dashed border-amber-300 text-amber-600 rounded-lg hover:bg-amber-100 font-bold text-sm">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ (Slot)</button>
                </div>

                <div class="bg-red-50 p-3 rounded-lg border border-red-100">
                    <label class="text-xs font-bold text-red-800 block mb-2">üö´ ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</label>
                    <div class="flex gap-4">
                        <label class="flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" id="edit-reward-no-guild" class="rounded text-red-600 focus:ring-red-500">
                            <span class="text-xs text-gray-700">‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡∏ö‡∏±‡∏ü‡∏Å‡∏¥‡∏•‡∏î‡πå</span>
                        </label>
                        <label class="flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" id="edit-reward-no-personal" class="rounded text-red-600 focus:ring-red-500">
                            <span class="text-xs text-gray-700">‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡∏ö‡∏±‡∏ü‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</span>
                        </label>
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="text-xs text-gray-500">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å</label>
                        <input type="number" id="edit-reward-stock" class="w-full px-4 py-2 border rounded-lg">
                        <div class="flex items-center mt-1">
                            <input type="checkbox" id="edit-reward-unlimited" class="mr-2" onchange="toggleStockInput('edit')">
                            <label for="edit-reward-unlimited" class="text-[10px] text-gray-600">‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î</label>
                        </div>
                    </div>
                    <div class="flex items-center gap-2 mt-4 p-3 bg-gray-50 rounded-lg border border-gray-200">
                        <input type="checkbox" id="edit-reward-active" class="w-5 h-5 text-green-600 rounded focus:ring-green-500 cursor-pointer">
                        <label for="edit-reward-active" class="text-sm font-bold text-gray-700 cursor-pointer select-none">‚úÖ ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤)</label>
                    </div>
                    <div>
                        <label class="text-xs text-gray-500">‡πÇ‡∏Ñ‡∏ß‡∏ï‡∏≤/‡∏Ñ‡∏ô</label>
                        <input type="number" id="edit-reward-quota" class="w-full px-4 py-2 border rounded-lg">
                        <div class="flex items-center mt-1 mb-2">
                             <input type="checkbox" id="edit-reward-quota-unlimited" class="mr-2" onchange="toggleQuotaInput('edit')">
                            <label for="edit-reward-quota-unlimited" class="text-[10px] text-gray-600">‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î (0)</label>
                        </div>

                        <button type="button" onclick="resetSingleRewardQuota()" class="w-full text-xs bg-orange-50 hover:bg-orange-100 text-orange-600 border border-orange-200 py-2 rounded-lg transition-colors flex items-center justify-center gap-1">
                           <span>üîÑ</span> ‡∏•‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏Å (Reset Quota)
                        </button>
                         <p class="text-[9px] text-gray-400 text-center mt-1">* ‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÅ‡∏•‡∏Å‡∏Ç‡∏≠‡∏á‡∏ä‡∏¥‡πâ‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡πÉ‡∏´‡∏°‡πà (‡∏™‡∏ï‡πá‡∏≠‡∏Å‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô)</p>
                    </div>
                   
                </div>

                <div class="flex gap-3 pt-4 border-t mt-4 sticky bottom-0 bg-white">
                    <button type="button" onclick="document.getElementById('edit-reward-modal').classList.add('hidden')" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 rounded-lg">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="submit" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg shadow-md">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
            </form>
        </div>

    </div>

    <!-- Redeem Confirm Modal -->
    <div id="redeem-quantity-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl shadow-xl max-w-sm w-full p-6 transform scale-100 transition-all">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl">üéÅ</div>
                <h3 class="text-xl font-bold text-gray-900" id="redeem-modal-title">‡πÅ‡∏•‡∏Å‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</h3>
                <p class="text-gray-500 text-sm mt-1" id="redeem-modal-subtitle"></p>
            </div>
            
            <div class="mb-6">
                <label class="block text-gray-700 text-sm font-bold mb-2">‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</label>
                <div class="flex items-center border border-gray-300 rounded-xl overflow-hidden">
                    <button onclick="adjustRedeemQty(-1)" class="px-4 py-3 bg-gray-50 hover:bg-gray-100 border-r text-gray-600">-</button>
                    <input type="number" id="redeem-qty" value="0" min="0" class="w-full text-center py-3 outline-none font-bold text-lg" oninput="validateRedeemInput(this)">
                    <button onclick="adjustRedeemQty(1)" class="px-4 py-3 bg-gray-50 hover:bg-gray-100 border-l text-gray-600">+</button>
                </div>
                <div class="flex justify-between items-center mt-3 px-1">
                    <span class="text-gray-600 text-sm">‡∏£‡∏ß‡∏°‡πÅ‡∏ï‡πâ‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ:</span>
                    <span id="redeem-total-points" class="font-bold text-amber-600 text-lg">0</span>
                </div>
            </div>
            
            <div class="flex gap-3">
                <button onclick="hideRedeemQuantityModal()" class="flex-1 py-3 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-colors">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button onclick="confirmRedeemAction()" class="flex-1 py-3 text-white bg-amber-500 hover:bg-amber-600 rounded-xl font-bold shadow-md shadow-amber-200 transition-colors">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡∏Å</button>
            </div>
        </div>
   </div>
<div id="add-quest-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50 p-4">
    <div class="bg-white rounded-xl shadow-xl max-w-md w-full p-6">
     <h2 class="text-xl font-bold text-gray-800 mb-4">üìú ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡πÉ‡∏´‡∏°‡πà</h2>
     <form onsubmit="handleAddQuest(event)" class="space-y-4">
       <div>
           <label class="text-xs text-gray-500">‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à</label>
           <input type="text" id="add-quest-title" required placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô‡∏Ñ‡∏£‡∏ö, ‡∏à‡∏¥‡∏ï‡∏≠‡∏≤‡∏™‡∏≤" class="w-full px-4 py-2 border rounded-lg bg-gray-50 focus:bg-white transition-colors">
       </div>
       <div>
        <label class="text-xs text-gray-500">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
        <select id="add-quest-category" class="w-full px-4 py-2 border rounded-lg bg-white">
            </select>
    </div>
       <div class="grid grid-cols-2 gap-4">
           <div>
               <label class="text-xs text-gray-500">‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô (Emoji)</label>
               <input type="text" id="add-quest-icon" placeholder="‡πÄ‡∏ä‡πà‡∏ô üßπ, üìö, ‚ú®" class="w-full px-4 py-2 border rounded-lg text-center">
           </div>
           <div>
               <label class="text-xs text-gray-500">‡πÅ‡∏ï‡πâ‡∏°‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</label>
               <input type="number" id="add-quest-points" required placeholder="10" class="w-full px-4 py-2 border rounded-lg text-center font-bold text-green-600">
           </div>
       </div>
       <div class="flex gap-3 pt-4">
         <button type="button" onclick="document.getElementById('add-quest-modal').classList.add('hidden')" class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-600 py-2 rounded-lg">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
         <button type="submit" class="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white py-2 rounded-lg shadow-md">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à</button>
       </div>


     </form>
    </div>
   </div>

   <div id="edit-quest-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50 p-4">
    <div class="bg-white rounded-xl shadow-xl max-w-md w-full p-6">
     <h2 class="text-xl font-bold text-gray-800 mb-4">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à</h2>
     <form onsubmit="handleEditQuestSubmit(event)" class="space-y-4">
       <input type="hidden" id="edit-quest-id">
       <div>
           <label class="text-xs text-gray-500">‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à</label>
           <input type="text" id="edit-quest-title" required class="w-full px-4 py-2 border rounded-lg bg-gray-50 focus:bg-white transition-colors">
       </div>
       <div>
        <label class="text-xs text-gray-500">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
        <select id="edit-quest-category" class="w-full px-4 py-2 border rounded-lg bg-white">
            </select>
         </div>
       <div class="grid grid-cols-2 gap-4">
           <div>
               <label class="text-xs text-gray-500">‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô (Emoji)</label>
               <input type="text" id="edit-quest-icon" class="w-full px-4 py-2 border rounded-lg text-center">
           </div>
           <div>
               <label class="text-xs text-gray-500">‡πÅ‡∏ï‡πâ‡∏°‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</label>
               <input type="number" id="edit-quest-points" required class="w-full px-4 py-2 border rounded-lg text-center font-bold text-blue-600">
           </div>
       </div>
       <div class="flex gap-3 pt-4">
         <button type="button" onclick="document.getElementById('edit-quest-modal').classList.add('hidden')" class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-600 py-2 rounded-lg">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
         <button type="submit" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg shadow-md">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
       </div>
     </form>
    </div>
   </div>

   <div id="manage-quest-cat-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50 p-4">
    <div class="bg-white rounded-xl shadow-xl max-w-sm w-full p-6">
        <h2 class="text-xl font-bold text-gray-800 mb-4">üè∑Ô∏è ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à</h2>
        
        <div class="flex gap-2 mb-4">
            <input type="text" id="new-quest-cat-input" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÉ‡∏´‡∏°‡πà..." class="flex-1 px-3 py-2 border rounded-lg">
            <button onclick="addQuestCategory()" class="bg-indigo-600 text-white px-3 py-2 rounded-lg font-bold">+</button>
        </div>

        <div id="quest-cat-list" class="space-y-2 max-h-60 overflow-y-auto mb-4">
            </div>

        <button onclick="document.getElementById('manage-quest-cat-modal').classList.add('hidden')" class="w-full bg-gray-100 hover:bg-gray-200 text-gray-600 py-2 rounded-lg">‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á</button>
    </div>
   </div>

   <div id="bulk-quest-modal" class="fixed inset-0 modal-backdrop hidden z-50 overflow-y-auto">
    <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
        <div class="relative transform overflow-hidden rounded-xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-md p-6">
            
             <div class="text-center mb-4">
                 <div class="w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-2 text-2xl">‚ö°</div>
                 <h2 class="text-xl font-bold text-gray-800">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏ó‡∏µ‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</h2>
                 <p class="text-xs text-gray-500">‡πÅ‡∏ï‡πâ‡∏°‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏°‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</p>
                 <div id="bulk-quest-students-preview" class="text-xs text-indigo-600 bg-indigo-50 p-2 rounded-lg max-h-20 overflow-y-auto border border-indigo-100 mt-2 custom-scrollbar"></div>
             </div>

             <div class="mb-4 bg-indigo-50 p-3 rounded-lg border border-indigo-100 flex items-center justify-between">
                <label class="text-sm font-bold text-indigo-800 flex items-center gap-2">
                    üî¢ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏≥:
                </label>
                <div class="flex items-center bg-white rounded-lg border border-indigo-200 shadow-sm">
                    <button onclick="adjustBulkQuestQty(-1)" class="w-10 py-1 text-indigo-600 hover:bg-indigo-50 font-bold text-lg rounded-l-lg transition-colors">-</button>
                    <input type="number" id="bulk-quest-qty" value="1" min="1" class="w-16 text-center font-bold text-indigo-700 outline-none border-x border-indigo-100 py-1" onchange="if(this.value<1)this.value=1">
                    <button onclick="adjustBulkQuestQty(1)" class="w-10 py-1 text-indigo-600 hover:bg-indigo-50 font-bold text-lg rounded-r-lg transition-colors">+</button>
                </div>
             </div>
             
             <div class="mb-2 relative">
                <input type="text" id="bulk-quest-search" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à..." class="w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none" oninput="renderBulkQuestList()">
                <svg class="w-5 h-5 text-gray-400 absolute left-3 top-2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
             </div>
             
             <div id="bulk-quest-list" class="space-y-2 min-h-[300px] max-h-[400px] overflow-y-auto custom-scrollbar">
             </div>
             
             <div class="pt-4 mt-4 border-t">
                <button onclick="document.getElementById('bulk-quest-modal').classList.add('hidden')" class="w-full bg-gray-100 hover:bg-gray-200 text-gray-600 py-3 rounded-xl font-bold transition-colors">‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á</button>
             </div>
        </div>
    </div>
   </div>
     
     

   <div id="teacher-inventory-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl shadow-xl max-w-2xl w-full p-6 max-h-[85vh] flex flex-col">
            <div class="flex justify-between items-center mb-4 border-b pb-2">
                <div>
                    <h3 class="text-xl font-bold text-gray-900">üéí ‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h3>
                    <p id="inv-student-name" class="text-indigo-600 font-bold text-sm"></p>
                </div>
                <button onclick="document.getElementById('teacher-inventory-modal').classList.add('hidden')" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
            </div>
            
            <div id="teacher-inventory-list" class="flex-1 overflow-y-auto grid grid-cols-2 sm:grid-cols-3 gap-4 p-2">
                </div>
            
            <div class="mt-4 pt-2 border-t text-center text-xs text-gray-400">
                ‡∏Ñ‡∏£‡∏π‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏Å‡∏î‡πÉ‡∏ä‡πâ‡πÑ‡∏≠‡πÄ‡∏ó‡∏°‡πÉ‡∏´‡πâ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
            </div>
        </div>
   </div>

<div id="gacha-animation-modal" class="fixed inset-0 z-[200] flex items-center justify-center bg-black/90 hidden backdrop-blur-sm transition-all">
        <div class="text-center w-full max-w-md p-6">
            <div id="gacha-anim-icon" class="text-[150px] mb-8 inline-block select-none drop-shadow-2xl">üì¶</div>
            
            <h2 id="gacha-anim-text" class="text-4xl font-bold text-white tracking-widest mb-4">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏∏‡πà‡∏°...</h2>
            <p id="gacha-anim-sub" class="text-gray-300 text-lg"></p>

            <button id="gacha-close-btn" onclick="closeGachaModal()" class="hidden mt-8 bg-white text-red-600 font-bold py-3 px-8 rounded-full text-xl hover:scale-105 transition-transform shadow-lg mx-auto">
                ‡∏ï‡∏Å‡∏•‡∏á
            </button>
        </div>
   </div>

   <div id="manage-quest-categories-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50 p-4">
    <div class="bg-white rounded-xl shadow-xl max-w-sm w-full p-6">
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-bold text-gray-800">üìÇ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à</h3>
            <button onclick="document.getElementById('manage-quest-categories-modal').classList.add('hidden')" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
        </div>
        
        <div id="quest-category-list" class="space-y-2 mb-4 max-h-[300px] overflow-y-auto"></div>

        <div class="flex gap-2 border-t pt-4">
            <input type="text" id="new-quest-category-input" class="flex-1 border rounded-lg px-3 py-2 text-sm" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÉ‡∏´‡∏°‡πà...">
            <button onclick="addQuestCategory()" class="bg-green-600 text-white px-3 py-2 rounded-lg font-bold text-sm hover:bg-green-700">+</button>
        </div>
    </div>
</div>

<div id="guild-penalty-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-[110] p-4 font-sans">
    <div class="bg-white rounded-2xl shadow-2xl max-w-sm w-full transform transition-all overflow-hidden relative">
        
        <div id="gp-header-bar" class="h-2 w-full bg-gray-200"></div>

        <div class="p-6 text-center">
            <div id="gp-icon-bg" class="w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 text-4xl shadow-inner transition-colors">
                <span id="gp-icon">‚ö†Ô∏è</span>
            </div>

            <h3 id="gp-title" class="text-xl font-black text-gray-800 mb-1">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</h3>
            <p id="gp-subtitle" class="text-sm text-gray-500 mb-4">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î...</p>
            
            <div class="bg-gray-50 rounded-xl border border-gray-100 p-3 mb-4 text-left max-h-40 overflow-y-auto custom-scrollbar shadow-inner">
                <ul id="gp-list" class="space-y-2 text-sm">
                    </ul>
            </div>
            
            <div id="gp-total-section" class="hidden mb-4 bg-orange-50 p-2 rounded-lg border border-orange-100">
                <span class="text-xs text-orange-600 font-bold uppercase tracking-wider">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö</span>
                <div class="text-2xl font-black text-orange-600 tracking-tight" id="gp-total-amount">0</div>
                <span class="text-[10px] text-orange-400">‡πÅ‡∏ï‡πâ‡∏°</span>
            </div>

            <p id="gp-footer-text" class="text-[10px] text-gray-400 mb-0">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏...</p>
        </div>
        
        <div id="gp-actions" type="button" class="bg-gray-50 px-6 py-4 flex gap-3 border-t border-gray-100">
        </div>
    </div>
</div>

<div id="bulk-give-reward-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-[60] p-4">
    <div class="bg-white rounded-xl shadow-xl max-w-lg w-full p-6 flex flex-col max-h-[85vh]">
        <div class="text-center mb-4 shrink-0">
            <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2 text-2xl">üéÅ</div>
            <h2 class="text-xl font-bold text-gray-800">‡πÅ‡∏à‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡∏ü‡∏£‡∏µ</h2>
            <p class="text-xs text-gray-500">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡∏Å‡πÉ‡∏´‡πâ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (‡πÑ‡∏°‡πà‡∏´‡∏±‡∏Å‡πÅ‡∏ï‡πâ‡∏°)</p>
            <div id="bulk-give-preview" class="text-xs text-purple-600 bg-purple-50 p-2 rounded-lg mt-2 border border-purple-100 truncate">...</div>
        </div>

        <div class="flex-1 overflow-y-auto custom-scrollbar border rounded-xl p-2 bg-gray-50 mb-4 space-y-2" id="bulk-give-list">
            </div>

        <div class="bg-purple-50 p-3 rounded-lg border border-purple-100 flex items-center justify-between shrink-0 mb-4">
            <label class="text-sm font-bold text-purple-800 flex items-center gap-2">
                üì¶ ‡πÅ‡∏à‡∏Å‡∏Ñ‡∏ô‡∏•‡∏∞ (‡∏ä‡∏¥‡πâ‡∏ô):
            </label>
            <div class="flex items-center bg-white rounded-lg border border-purple-200 shadow-sm">
                <button onclick="adjustBulkGiveQty(-1)" class="w-10 py-1 text-purple-600 hover:bg-purple-50 font-bold text-lg rounded-l-lg transition-colors">-</button>
                <input type="number" id="bulk-give-qty" value="1" min="1" class="w-16 text-center font-bold text-purple-700 outline-none border-x border-purple-100 py-1" onchange="if(this.value<1)this.value=1">
                <button onclick="adjustBulkGiveQty(1)" class="w-10 py-1 text-purple-600 hover:bg-purple-50 font-bold text-lg rounded-r-lg transition-colors">+</button>
            </div>
        </div>

        <div class="flex gap-3 pt-2 shrink-0">
            <button onclick="document.getElementById('bulk-give-reward-modal').classList.add('hidden')" class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-600 py-2 rounded-lg font-bold">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
            <button onclick="confirmBulkGiveReward()" class="flex-1 bg-purple-600 hover:bg-purple-700 text-white py-2 rounded-lg shadow-md font-bold">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏à‡∏Å</button>
        </div>
    </div>
</div>

<div id="bulk-warning-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50 p-4">
    <div class="bg-white rounded-xl shadow-xl max-w-md w-full p-6 transform transition-all scale-100">
        <div class="text-center mb-6">
            <div id="bw-icon-bg" class="w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl shadow-inner">‚ö†Ô∏è</div>
            <h3 id="bulk-warning-title" class="text-xl font-bold text-gray-900">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ö‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</h3>
            <p id="bulk-warning-subtitle" class="text-gray-500 text-sm mt-1">...</p>
        </div>
        
        <input type="hidden" id="bulk-warning-type"> <div class="space-y-4">
            <div>
                <label class="block text-sm font-bold text-gray-700 mb-1">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏ö‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô (‡πÉ‡∏ö)</label>
                <div class="flex items-center border border-gray-300 rounded-xl overflow-hidden">
                    <button onclick="adjustWarningInput(-1)" class="px-4 py-3 bg-gray-50 hover:bg-gray-100 border-r text-gray-600 font-bold">-</button>
                    <input type="number" id="bulk-warning-amount" value="1" min="1" class="w-full text-center py-3 outline-none font-bold text-lg text-gray-800" onchange="if(this.value<1)this.value=1">
                    <button onclick="adjustWarningInput(1)" class="px-4 py-3 bg-gray-50 hover:bg-gray-100 border-l text-gray-600 font-bold">+</button>
                </div>
            </div>
            
            <div>
                <label class="block text-sm font-bold text-gray-700 mb-1">‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏• / ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</label>
                <input type="text" id="bulk-warning-reason" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Ñ‡∏∏‡∏¢‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏±‡∏á, ‡∏ä‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏Ñ‡∏£‡∏π..." class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-yellow-400 outline-none transition-all">
            </div>
        </div>

        <div class="flex gap-3 mt-8">
            <button onclick="document.getElementById('bulk-warning-modal').classList.add('hidden')" class="flex-1 py-3 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-xl font-bold transition-colors">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
            <button onclick="confirmBulkWarning()" id="btn-confirm-warning" class="flex-1 py-3 text-white bg-yellow-500 hover:bg-yellow-600 rounded-xl font-bold shadow-lg transition-transform active:scale-95">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
        </div>
    </div>
</div>

<div id="bank-locked-modal" class="fixed inset-0 bg-black/60 backdrop-blur-sm hidden items-center justify-center z-[70] p-4 transition-opacity">
    <div class="bg-white rounded-2xl shadow-2xl max-w-sm w-full p-6 text-center transform transition-all scale-100 border-t-4 border-red-500 relative overflow-hidden">
        <div class="absolute top-0 left-0 w-full h-32 bg-gradient-to-b from-red-50 to-white -z-10"></div>
        
        <div class="w-24 h-24 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-xl border-4 border-red-50 relative z-10">
            <span class="text-5xl drop-shadow-sm animate-bounce">üîí</span>
        </div>

        <h3 class="text-2xl font-black text-gray-800 mb-1">‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ñ‡∏π‡∏Å‡∏£‡∏∞‡∏á‡∏±‡∏ö!</h3>
        <p class="text-gray-500 text-sm mb-6 font-medium">Account Suspended</p>

        <div class="bg-red-50 rounded-xl p-5 mb-6 border border-red-100 shadow-inner">
            <p class="font-bold text-gray-800 text-lg mb-2" id="locked-student-name">‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</p>
            <div class="flex items-center justify-center gap-2 text-red-600 font-bold bg-white/80 py-2 rounded-lg border border-red-100">
                <span class="text-sm">‚ö†Ô∏è ‡∏ï‡∏¥‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÉ‡∏ö‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</span>
                <span class="text-xl px-1" id="locked-warning-count">0</span>
                <span class="text-sm">‡πÉ‡∏ö</span>
            </div>
        </div>

        <p class="text-xs text-gray-400 mb-6 px-4 leading-relaxed">
            ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ<br>
            ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Ñ‡∏£‡∏π‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à <span class="text-red-500 font-bold">"‡∏•‡∏ö‡∏•‡πâ‡∏≤‡∏á‡πÇ‡∏ó‡∏©"</span>
        </p>

        <button onclick="document.getElementById('bank-locked-modal').classList.add('hidden'); document.getElementById('bank-locked-modal').classList.remove('flex')" class="w-full py-3.5 bg-gray-900 hover:bg-gray-800 text-white rounded-xl font-bold shadow-lg transition-transform active:scale-95 flex items-center justify-center gap-2">
            <span>‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß</span>
        </button>
    </div>
</div>

<div id="quest-distribution-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-[80] p-4">
    <div class="bg-white rounded-xl shadow-xl max-w-2xl w-full flex flex-col max-h-[90vh]">
        
        <div class="p-5 border-b flex justify-between items-center bg-indigo-50 rounded-t-xl shrink-0">
            <div>
                <h3 class="text-xl font-bold text-indigo-900 flex items-center gap-2">
                    ‚ö° ‡πÅ‡∏à‡∏Å‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à
                </h3>
                <p id="quest-dist-title" class="text-sm text-indigo-600 font-bold mt-1">...</p>
            </div>
            <button onclick="document.getElementById('quest-distribution-modal').classList.add('hidden')" class="w-8 h-8 rounded-full bg-white text-gray-400 hover:text-red-500 flex items-center justify-center font-bold shadow-sm transition-colors">
                ‚úï
            </button>
        </div>

        <div class="p-4 bg-white border-b flex flex-col sm:flex-row gap-3 items-center shrink-0">
            <div class="relative flex-1 w-full">
                <input type="text" id="quest-dist-search" oninput="renderQuestStudentSelector()" 
                    placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠ ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß..." 
                    class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none">
                <svg class="w-5 h-5 text-gray-400 absolute left-3 top-2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
            </div>
            <div class="flex items-center gap-2 shrink-0">
                <span class="text-sm font-bold text-gray-600">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß: <span id="quest-dist-count" class="text-indigo-600 text-lg">0</span> ‡∏Ñ‡∏ô</span>
                <button onclick="clearQuestDistSelection()" class="text-xs text-red-500 hover:bg-red-50 px-2 py-1 rounded border border-transparent hover:border-red-200 transition-colors">
                    ‡∏•‡πâ‡∏≤‡∏á
                </button>
            </div>
        </div>

        <div class="flex-1 overflow-y-auto p-4 bg-gray-50 custom-scrollbar relative">
            <div id="quest-dist-list" class="grid grid-cols-1 sm:grid-cols-2 gap-2">
                </div>
        </div>

        <div class="p-4 border-t bg-white rounded-b-xl shrink-0">
            <div class="flex items-center justify-between mb-4 bg-indigo-50 p-3 rounded-lg border border-indigo-100">
                <label class="font-bold text-indigo-800 text-sm flex items-center gap-2">
                    üî¢ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏≥:
                </label>
                <div class="flex items-center bg-white rounded-lg border border-indigo-200 shadow-sm">
                    <button onclick="adjustQuestDistQty(-1)" class="w-10 py-1 text-indigo-600 hover:bg-indigo-50 font-bold text-lg rounded-l-lg">-</button>
                    <input type="number" id="quest-dist-qty" value="1" min="1" class="w-16 text-center font-bold text-indigo-700 outline-none border-x border-indigo-100 py-1">
                    <button onclick="adjustQuestDistQty(1)" class="w-10 py-1 text-indigo-600 hover:bg-indigo-50 font-bold text-lg rounded-r-lg">+</button>
                </div>
            </div>

            <div class="flex gap-3">
                <button onclick="document.getElementById('quest-distribution-modal').classList.add('hidden')" class="flex-1 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-bold transition-colors">
                    ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                </button>
                <button onclick="confirmQuestDistribution()" class="flex-1 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold shadow-lg transition-transform active:scale-95 flex items-center justify-center gap-2">
                    <span>‚ö° ‡πÅ‡∏à‡∏Å‡πÅ‡∏ï‡πâ‡∏°‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</span>
                </button>
            </div>
        </div>
    </div>
</div>

<div id="manage-reward-categories-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-[60] p-4">
    <div class="bg-white rounded-xl shadow-xl max-w-sm w-full p-6">
        <h2 class="text-xl font-bold text-gray-800 mb-4">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</h2>
        
        <div class="flex gap-2 mb-4">
            <input type="text" id="new-reward-cat-name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÉ‡∏´‡∏°‡πà..." class="flex-1 px-4 py-2 border rounded-lg">
            <button onclick="addRewardCategory()" class="bg-indigo-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-indigo-700">+</button>
        </div>

        <div id="manage-reward-cat-list" class="space-y-2 max-h-60 overflow-y-auto mb-4 custom-scrollbar">
            </div>

        <button onclick="document.getElementById('manage-reward-categories-modal').classList.add('hidden'); document.getElementById('manage-reward-categories-modal').classList.remove('flex')" class="w-full bg-gray-100 text-gray-600 py-2 rounded-lg font-bold">‡∏õ‡∏¥‡∏î</button>
    </div>
</div>

<div id="quiz-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50 p-4">
    <div class="bg-white rounded-xl shadow-xl max-w-4xl w-full p-6 flex flex-col max-h-[90vh]">
        <div class="flex justify-between items-center mb-4 border-b pb-2">
            <div>
                <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">üìù ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</h2>
                <p class="text-xs text-gray-500">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå CSV ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö -> ‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏â‡∏•‡∏¢ -> ‡πÅ‡∏à‡∏Å‡πÅ‡∏ï‡πâ‡∏°</p>
            </div>
            <button onclick="document.getElementById('quiz-modal').classList.add('hidden')" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
        </div>

        <div id="quiz-step-1" class="text-center py-10 border-2 border-dashed border-gray-300 rounded-xl hover:bg-gray-50 transition-colors cursor-pointer" onclick="document.getElementById('quiz-file-input').click()">
            <div class="text-5xl mb-3">üìÇ</div>
            <p class="text-gray-600 font-bold">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå CSV ‡∏´‡∏£‡∏∑‡∏≠ XLSX</p>
            <p class="text-xs text-gray-400 mt-1">‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏≤‡∏Å‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ô‡∏≠‡∏Å‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</p>
            <input type="file" id="quiz-file-input" accept=".csv, .xlsx, .xls" class="hidden" onchange="handleQuizFile(this)">
        </div>

        <div id="quiz-step-2" class="hidden flex-1 overflow-hidden flex flex-col">
            <div class="bg-blue-50 p-3 rounded-lg border border-blue-200 mb-3 flex items-start gap-3">
                <span class="text-2xl">üóùÔ∏è</span>
                <div class="flex-1">
                    <h3 class="font-bold text-blue-800 text-sm">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏â‡∏•‡∏¢‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h3>
                    <p class="text-xs text-blue-600">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡πÄ‡∏õ‡πä‡∏∞‡πÜ (‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)</p>
                </div>
            </div>
            
            <div class="flex-1 overflow-y-auto custom-scrollbar border rounded-lg">
                <table class="w-full text-sm">
                    <thead class="bg-gray-100 text-gray-700 sticky top-0 shadow-sm">
                        <tr>
                            <th class="px-4 py-2 text-left w-1/3">‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</th>
                            <th class="px-4 py-2 text-left w-1/3">‡πÄ‡∏â‡∏•‡∏¢‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö (‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏á‡πÄ‡∏õ‡πä‡∏∞)</th>
                            <th class="px-4 py-2 text-center w-24">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</th>
                        </tr>
                    </thead>
                    <tbody id="quiz-config-list" class="divide-y divide-gray-100"></tbody>
                </table>
            </div>

            <div class="pt-4 border-t mt-3 flex justify-between items-center">
                <div class="text-xs text-gray-500">
                    ‡∏û‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå: <span id="quiz-student-count" class="font-bold text-indigo-600">0</span> ‡∏Ñ‡∏ô
                </div>
                <button onclick="previewQuizCalculation()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded-lg font-bold shadow-md">
                    ‡∏ï‡πà‡∏≠‡πÑ‡∏õ: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏ï‡πâ‡∏° ‚û°Ô∏è
                </button>
            </div>
        </div>

        <div id="quiz-step-3" class="hidden flex-1 overflow-hidden flex flex-col">
            <h3 class="font-bold text-gray-800 mb-2">‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö</h3>
            <div class="flex-1 overflow-y-auto custom-scrollbar border rounded-lg bg-gray-50">
                <table class="w-full text-sm">
                    <thead class="bg-gray-200 text-gray-700 sticky top-0">
                        <tr>
                            <th class="px-4 py-2 text-left">‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•</th>
                            <th class="px-4 py-2 text-center">‡∏ñ‡∏π‡∏Å (‡∏Ç‡πâ‡∏≠)</th>
                            <th class="px-4 py-2 text-center text-green-700 font-bold">‡πÅ‡∏ï‡πâ‡∏°‡∏£‡∏ß‡∏°</th>
                        </tr>
                    </thead>
                    <tbody id="quiz-preview-list" class="divide-y divide-gray-200"></tbody>
                </table>
            </div>
            <div class="pt-4 border-t mt-3 flex gap-3">
                <button onclick="resetQuizModal()" class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-600 py-2 rounded-lg font-bold">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
                <button onclick="confirmQuizDistribution()" class="flex-1 bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg font-bold shadow-lg">
                    ‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏à‡∏Å‡πÅ‡∏ï‡πâ‡∏°
                </button>
            </div>
        </div>
    </div>
</div>

<!-- GROUP MODAL -->

<div id="manage-group-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50 p-4">
    <div class="bg-white rounded-xl shadow-xl max-w-2xl w-full flex flex-col max-h-[90vh]">
        <div class="p-6 border-b flex justify-between items-center">
            <h3 class="text-xl font-bold text-gray-800" id="manage-group-title">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</h3>
            <button onclick="document.getElementById('manage-group-modal').classList.add('hidden')" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
        </div>
        
        <div class="p-6 overflow-y-auto custom-scrollbar flex-1">
            <input type="hidden" id="group-id-input">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏∏‡πà‡∏°</label>
                    <input type="text" id="group-name-input" class="w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-indigo-500 outline-none" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÇ‡∏Ñ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏ó‡∏¢‡πå...">
                </div>
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô</label>
                    <input type="text" id="group-icon-input" class="w-full border border-gray-300 rounded-lg p-2 text-center" placeholder="‡πÄ‡∏ä‡πà‡∏ô üß™" value="üë•">
                </div>
            </div>

            <div class="mb-2">
                <label class="block text-sm font-bold text-gray-700 mb-1">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</label>
                <input type="text" id="group-member-search" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô..." class="w-full border border-gray-200 rounded-lg p-2 text-sm mb-2" oninput="renderGroupMemberSelector()">
            </div>
            
            <div id="group-member-list" class="border rounded-lg h-60 overflow-y-auto p-2 bg-gray-50 grid grid-cols-1 sm:grid-cols-2 gap-2">
                </div>
        </div>

        <div class="p-4 border-t bg-gray-50 flex justify-end gap-2 rounded-b-xl">
            <button onclick="document.getElementById('manage-group-modal').classList.add('hidden')" class="px-4 py-2 text-gray-600 hover:bg-gray-200 rounded-lg font-bold">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
            <button onclick="saveCustomGroup()" class="px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-bold shadow">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏•‡∏∏‡πà‡∏°</button>
        </div>
    </div>
</div>

<div id="group-point-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50 p-4">
    <div class="bg-white rounded-xl shadow-xl max-w-md w-full p-6 relative">
        <button onclick="document.getElementById('group-point-modal').classList.add('hidden')" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-xl">&times;</button>
        
        <div class="text-center mb-6">
            <div id="gp-modal-icon" class="text-5xl mb-2">üë•</div>
            <h3 id="gp-modal-name" class="text-xl font-bold text-gray-800">‡πÅ‡∏à‡∏Å‡πÅ‡∏ï‡πâ‡∏°‡∏Å‡∏•‡∏∏‡πà‡∏°</h3>
            <p id="gp-modal-count" class="text-sm text-gray-500">‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å 0 ‡∏Ñ‡∏ô</p>

            <div class="mt-2">
                <button onclick="document.getElementById('gp-member-list').classList.toggle('hidden')" class="text-xs text-indigo-500 hover:text-indigo-700 font-bold underline cursor-pointer">
                    (‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å)
                </button>
           </div>
        </div>

        <div id="gp-member-list" class="hidden mb-4 bg-gray-50 p-3 rounded-lg border border-gray-100 max-h-32 overflow-y-auto custom-scrollbar">
            <div class="text-center text-gray-400 text-xs">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
        </div>


        <div class="flex border-b mb-4">
            <button onclick="switchGroupPointTab('custom')" id="gp-tab-custom" class="flex-1 pb-2 border-b-2 border-indigo-600 text-indigo-600 font-bold text-sm">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏≠‡∏á</button>
            <button onclick="switchGroupPointTab('mission')" id="gp-tab-mission" class="flex-1 pb-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-bold text-sm">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à</button>
        </div>

        <div id="gp-content-custom" class="space-y-4">
            <div>
                <label class="block text-xs font-bold text-gray-600 mb-1">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏ï‡πâ‡∏° (‡∏ï‡πà‡∏≠‡∏Ñ‡∏ô)</label>
                <input type="number" id="gp-amount" class="w-full text-center text-2xl font-bold border border-indigo-200 rounded-lg py-2 text-indigo-700 focus:ring-2 focus:ring-indigo-500 outline-none" value="10">
            </div>
            <div>
                <label class="block text-xs font-bold text-gray-600 mb-1">‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•</label>
                <input type="text" id="gp-reason" class="w-full border border-gray-300 rounded-lg p-2 text-sm" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à...">
            </div>
        </div>

        <div id="gp-content-mission" class="hidden space-y-4">
            <div>
                <label class="block text-xs font-bold text-gray-600 mb-1">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à</label>
                <select id="gp-mission-select" class="w-full border border-gray-300 rounded-lg p-2 text-sm" onchange="onGroupMissionSelect()">
                    <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à --</option>
                </select>
            </div>
            <div id="gp-mission-preview" class="hidden bg-indigo-50 p-3 rounded-lg border border-indigo-100 text-center">
                <div class="text-2xl mb-1" id="gp-mp-icon"></div>
                <div class="font-bold text-gray-800 text-sm" id="gp-mp-title"></div>
                <div class="text-green-600 font-bold mt-1" id="gp-mp-points"></div>
            </div>
        </div>

        <div class="mt-6">
            <button onclick="confirmGroupPoints()" class="w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold shadow-lg flex items-center justify-center gap-2">
                <span>üéÅ</span> ‡πÅ‡∏à‡∏Å‡πÅ‡∏ï‡πâ‡∏°‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô
            </button>
            <p class="text-[10px] text-center text-gray-400 mt-2">*‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ö‡∏±‡∏ü‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡πâ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</p>
        </div>
    </div>
</div>

<div id="student-bank-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-[90] p-4">
    <div class="bg-white rounded-2xl shadow-2xl max-w-sm w-full p-6 relative overflow-hidden">
        <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-500 to-indigo-600"></div>
        
        <h3 id="std-bank-title" class="text-2xl font-bold mb-1 text-gray-800">‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</h3>
        <p class="text-xs text-gray-400 mb-4">‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡πâ‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
        
        <div class="bg-indigo-50 p-4 rounded-xl mb-5 border border-indigo-100">
            <div class="flex justify-between text-sm text-gray-600 mb-2">
                <span>üí∞ ‡πÅ‡∏ï‡πâ‡∏°‡πÉ‡∏ô‡∏°‡∏∑‡∏≠:</span>
                <span id="std-bank-wallet" class="font-bold text-gray-800">0</span>
            </div>
            <div class="flex justify-between text-sm text-gray-600">
                <span>üè¶ ‡πÅ‡∏ï‡πâ‡∏°‡πÉ‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£:</span>
                <span id="std-bank-balance" class="font-bold text-blue-600">0</span>
            </div>
        </div>

        <div class="mb-6">
            <label class="block text-gray-700 font-bold mb-2 text-sm">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏ï‡πâ‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</label>
            <input type="number" id="std-bank-amount" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-center text-3xl font-bold text-indigo-600 focus:border-indigo-500 focus:outline-none bg-white placeholder-gray-200 transition-all" placeholder="0">
            
            <div class="flex gap-2 mt-3">
                <button onclick="setStudentBankAmount(100)" class="flex-1 py-1.5 bg-gray-100 rounded-lg text-xs font-bold text-gray-500 hover:bg-gray-200 hover:text-gray-700 transition-colors">100</button>
                <button onclick="setStudentBankAmount(500)" class="flex-1 py-1.5 bg-gray-100 rounded-lg text-xs font-bold text-gray-500 hover:bg-gray-200 hover:text-gray-700 transition-colors">500</button>
                <button onclick="setStudentBankAmount('all')" class="flex-1 py-1.5 bg-indigo-100 rounded-lg text-xs font-bold text-indigo-600 hover:bg-indigo-200 transition-colors">‡∏´‡∏°‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏±‡∏Å</button>
            </div>
        </div>

        <div class="flex gap-3">
            <button onclick="document.getElementById('student-bank-modal').classList.add('hidden')" class="flex-1 py-3 text-gray-500 font-bold hover:bg-gray-100 rounded-xl transition-all">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
            <button id="btn-confirm-std-bank" onclick="confirmStudentBankTransaction()" class="flex-1 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
        </div>
    </div>
</div>

  </div> <!-- End App -->

  
  
 </body>
</html>

